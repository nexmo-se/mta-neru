{"version":3,"sources":["logo.svg","context/UserContext.js","api/fetchRecording.js","api/fetchCreds.js","hooks/usePublisher.js","hooks/useDevices.js","components/AudioSetting/index.js","components/VideoSetting/index.js","components/WaitingRoom/styles.js","utils/index.js","components/WaitingRoom/index.js","hooks/useSession.js","components/MuteAudioButton/styles.js","components/MuteAudioButton/index.js","components/MuteVideoButton/styles.js","components/MuteVideoButton/index.js","utils/document.js","hooks/useSignalling.js","components/RecordButton/styles.js","components/RecordButton/index.js","components/EndCallButton/index.js","components/ToolBar/styles.js","components/ToolBar/index.js","components/Banner/styles.js","components/EntitiesList/index.js","components/Main/index.js","hooks/usePDFMine.js","components/Wrapper/styles.js","components/Wrapper/index.js","components/EndCall/styles.js","components/EndCall/index.js","components/ProtectedRoute/index.js","components/Header/styles.js","components/Header/index.js","components/VirtualView/styles.js","components/VirtualView/index.js","App.js","index.js"],"names":["UserContext","createContext","API_URL","process","render","roomName","axios","post","stopRecording","archiveId","get","console","log","getCredentials","getVirtualViewerCredentials","startTranslation","streamId","sessionId","streamName","specialty","usePublisher","useParams","useContext","preferences","useState","isPublishing","setIsPublishing","pubInitialised","setPubInitialised","publisherRef","useRef","publisherError","setPublisherError","setConnectionIdFromStreamer","setSessionId","audioInputDevices","videoInputDevices","audioOutputDevices","deviceInfo","setDeviceInfo","getDevices","useCallback","navigator","mediaDevices","enumerateDevices","warn","Promise","resolve","reject","OT","err","devices","getAudioOutputDevices","filter","d","kind","toLowerCase","useEffect","addEventListener","removeEventListener","useDevices","streamCreatedListener","React","stream","name","publisher","session","id","localStorage","getItem","then","data","connectionId","catch","e","streamDestroyedListener","current","initPublisher","containerId","publisherOptions","finalPublisherOptions","Object","assign","width","height","publishVideo","publishAudio","style","buttonDisplayMode","nameDisplayMode","insertMode","showControls","fitMode","on","off","destroyPublisher","destroy","publish","unpublish","AudioSettings","memo","hasAudio","onAudioChange","className","Switch","checked","onChange","VideoSettings","hasVideo","onVideoChange","makeStyles","theme","waitingRoomContainer","position","left","top","display","flexDirection","transform","backgroundColor","blueGrey","padding","borderRadius","waitingRoomVideoContainer","deviceContainer","margin","deviceSettings","justifyContent","alignItems","selectWidth","networkTestContainer","flex","green","color","red","containerCenter","getSourceDeviceId","inputDevices","currentSource","toReturn","i","length","label","deviceId","WaitingRoom","classes","useStyles","setPreferences","push","useHistory","defaultLocalAudio","defaultLocalVideo","localAudio","setLocalAudio","localVideo","setLocalVideo","undefined","localVideoSource","setLocalVideoSource","localAudioSource","setLocalAudioSource","localAudioOutput","setLocalAudioOutput","audioDevice","setAudioDevice","videoDevice","setVideoDevice","audioOutputDevice","setAudioOutputDevice","setSpecialty","setRoomName","userName","setUserName","isRoomNameInvalid","setIsRoomNameInvalid","isUserNameInvalid","setIsUserNameInvalid","handleAudioChange","target","handleVideoChange","handleVideoSource","videoDeviceId","value","setVideoSource","handleAudioSource","audioDeviceId","setAudioSource","handleAudioOutput","audioOutputId","handleJoinClick","setItem","onKeyDown","keyCode","currentAudioDevice","getAudioSource","currentVideoDevice","getVideoSource","track","getActiveAudioOutputDevice","currentAudioOutputDevice","defaultSettings","audioSource","videoSource","audioOutput","waitingRoomVideoPreview","form","noValidate","FormControl","fullWidth","InputLabel","Select","size","labelId","map","key","MenuItem","TextField","variant","required","autoComplete","error","autoFocus","trim","autoWidth","device","ref","Button","onClick","useSession","container","connected","setConnected","streams","setStreams","sessionRef","status","setNetworkStatus","isArchiving","setIsArchiving","shouldSubscribe","subscribe","options","finalOptions","subscribeToVideo","subscribeToAudio","onStreamCreated","event","window","location","pathname","split","prev","addStream","onStreamDestroyed","prevStream","removeStream","onArchiveStarted","onArchiveStopped","onSessionDisconnected","onSessionReconnecting","onConnectionDestroyed","createSession","apiKey","token","Error","initSession","eventHandlers","streamCreated","streamDestroyed","sessionReconnecting","sessionDisconnected","connectionDestoyed","archiveStarted","archiveStopped","connect","destroySession","disconnect","selected","MuteAudioButton","toggleAudio","title","styles","Tooltip","IconButton","edge","toolbarButtons","disabledButton","fontSize","MuteVideoButton","arrowButton","StyleSheet","create","page","section","text","MyDocument","src","maxWidth","maxHeight","timestamp","speaker","useSignalling","messages","setMessages","setArchiveId","renderedSesion","setRenderedSession","medication","setMedicationEntities","medicalConditions","setMedicalConditionsEntities","anatomyEntities","setAnatomyEntities","piiEntities","setPiiEntities","ttpEntities","setTtpEntities","signal","type","payload","JSON","parse","stringify","archiveListener","sessionRendered","sendMessage","message","medicationListener","dataJson","from","forEach","entity","Category","Text","Math","floor","Score","concepts","RxNormConcepts","medConditionListener","ICD10CMConcepts","entitiesListener","Type","attribute","Attributes","messageListener","activeRecordingIcon","boxShadow","animation","RecordingButton","renderId","setRenderId","localClasses","startRender","renderData","recording","stopRenderAndRecording","handleRecordingStop","EndCallIcon","handleEndCall","toolbarContainer","palette","toolbarBackground","main","bottom","right","paper","background","border","shadows","spacing","toolbarMobileContainer","infoButton","groupButton","activeButtons","activeButton","activeButtonIcon","ToolBar","root","wsStatus","info","action","paddingRight","networkStatusIcons","snackBarContent","EntitiesList","listOfEntities","List","ListItem","disablePadding","ListItemIcon","getIcon","Typography","getBgColor","component","gutterBottom","sx","pl","overflow","overflowY","bgcolor","ListItemText","primary","Collapse","in","timeout","unmountOnExit","_e","_i","Code","Description","Main","videoContainer","captions","setCaptions","credentials","setCredentials","setError","setHasAudio","setHasVideo","setUserId","document","usePDF","flexGrow","MyDocuments","captiones","usePDFMine","instance","messagesWithDate","Date","toTimeString","userId","flexWrap","alignContent","Wrapper","banner","zIndex","marginTop","new__meeting","meetingInfo","minWidth","bullet","pos","marginBottom","centeredFlex","EndCall","recordings","setRecordings","setData","fetchRecordings","fileName","blob","url","loading","Card","CardContent","CardActions","createdAt","href","ProtectedRoute","Component","rest","computedMatch","params","props","to","header","alignSelf","Header","VirtualView","App","preferencesValue","useMemo","ThemeProvider","createTheme","secondary","bodyBackground","black","callBackground","Provider","exact","path","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.99e057ef.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { createContext } from 'react';\n\nexport const UserContext = createContext();\n","import axios from 'axios';\nlet API_URL = `${process.env.REACT_APP_API_URL_DEVELOPMENT}`;\nif (process.env.NODE_ENV === 'production') {\n  API_URL = `${process.env.REACT_APP_API_URL_PRODUCTION}`;\n}\nconst fetchRecordings = (sessionId) => {\n  return axios.get(`${API_URL}/archive/${sessionId}`);\n};\n\nconst startRecording = (sessionId) => {\n  console.log('Got session client side' + sessionId);\n  return axios.post(`${API_URL}/archive/start`, {\n    session_id: sessionId,\n  });\n};\n\nconst render = (roomName) => {\n  return axios.post(`${API_URL}/render`, { roomName: roomName });\n};\n\nconst stopRender = (id) => {\n  return axios.get(`${API_URL}/render/stop/${id}`);\n};\n\nconst stopRecording = (archiveId) => {\n  return axios.get(`${API_URL}/archive/stop/${archiveId}`);\n};\n\nexport { fetchRecordings, startRecording, stopRecording, render, stopRender };\n","import axios from 'axios';\n\nlet API_URL = process.env.REACT_APP_API_URL_DEVELOPMENT;\n\nconsole.log(process.env.NODE_ENV, API_URL);\n\n// let API_URL = `http://localhost:5000`;\nif (process.env.NODE_ENV === 'production') {\n  API_URL = `${process.env.REACT_APP_API_URL_PRODUCTION}`;\n}\n\nexport const getCredentials = async (roomName) => {\n  return axios.get(`${API_URL}/session/${roomName}`);\n};\nexport const getVirtualViewerCredentials = async (roomName) => {\n  return axios.get(`${API_URL}/session/${roomName}?role=virtual`);\n};\n\nexport const startTranslation = async (\n  streamId,\n  sessionId,\n  streamName,\n  specialty\n) => {\n  return axios.post(`${API_URL}/startStreaming`, {\n    streamId,\n    sessionId,\n    streamName,\n    specialty,\n  });\n};\n\nexport const stopStreamer = async (sessionId, connectionId) => {\n  return axios.get(`${API_URL}/stopStreamer/${sessionId}/${connectionId}`);\n};\n\nexport const getToken = async () => {\n  return axios.get(`${API_URL}/token`);\n};\n","import React, { useCallback, useRef, useState, useContext } from 'react';\nimport OT from '@opentok/client';\n\nimport { useParams } from 'react-router';\nimport { UserContext } from '../context/UserContext';\nimport { stopRecording, stopRender } from '../api/fetchRecording';\nimport useDevices from '../hooks/useDevices';\n\nimport { startTranslation, stopStreamer } from '../api/fetchCreds';\n\nexport function usePublisher() {\n  let { roomName } = useParams();\n  const { preferences } = useContext(UserContext);\n  const [isPublishing, setIsPublishing] = useState(false);\n  const [pubInitialised, setPubInitialised] = useState(false);\n  const publisherRef = useRef();\n  const [publisherError, setPublisherError] = useState(null);\n  const [connectionIdFromStream, setConnectionIdFromStreamer] = useState(null);\n  const [sessionId, setSessionId] = useState(null);\n  const { deviceInfo, getDevices } = useDevices();\n\n  const streamCreatedListener = React.useCallback(\n    ({ stream }) => {\n      if (stream.name !== 'EC') {\n        console.log(stream);\n        // preferences.streamId = stream.id;\n        const sessionId = stream.publisher.session.id;\n        console.log(sessionId);\n        setSessionId(sessionId);\n\n        // setConnectionIdFromStreamer('124');\n        console.log({ roomName, specialty: localStorage.getItem('specialty') });\n        startTranslation(\n          stream.id,\n          sessionId,\n          stream.name,\n          localStorage.getItem('specialty')\n        )\n          .then((data) => {\n            console.log(data.data);\n            console.log('setting connectionId ' + data.data.connectionId);\n            setConnectionIdFromStreamer(data.data.connectionId);\n          })\n          .catch((e) => console.log(e));\n        setIsPublishing(true);\n      }\n    },\n    [roomName]\n  );\n\n  const streamDestroyedListener = useCallback(({ stream }) => {\n    console.log('destroyed publisher');\n\n    //the problem seems to be sessionid is undefined\n\n    // .then((data) => {})\n    // .catch((e) => console.log(e));\n    publisherRef.current = null;\n\n    setPubInitialised(false);\n    setIsPublishing(false);\n  }, []);\n\n  const initPublisher = useCallback(\n    (containerId, publisherOptions) => {\n      console.log('UsePublisher - initPublisher');\n      if (publisherRef.current) {\n        console.log('UsePublisher - Already initiated');\n        return;\n      }\n      if (!containerId) {\n        console.log('UsePublisher - Container not available');\n      }\n      const finalPublisherOptions = Object.assign({}, publisherOptions, {\n        width: '100%',\n        height: '100%',\n        //name: preferences.name,\n        name: localStorage.getItem('username'),\n        publishVideo: true,\n        publishAudio: true,\n        style: {\n          buttonDisplayMode: 'on',\n          nameDisplayMode: 'off',\n        },\n        insertMode: 'append',\n        showControls: true,\n        fitMode: 'contain',\n      });\n      console.log('usePublisher finalPublisherOptions', finalPublisherOptions);\n      publisherRef.current = OT.initPublisher(\n        containerId,\n        finalPublisherOptions,\n        (err) => {\n          if (err) {\n            console.log('[usePublisher]', err);\n            publisherRef.current = null;\n          }\n          console.log('Publisher Created');\n        }\n      );\n\n      publisherRef.current.on('accessAllowed', getDevices);\n\n      setPubInitialised(true);\n\n      publisherRef.current.on('streamCreated', streamCreatedListener);\n      publisherRef.current.on('streamDestroyed', streamDestroyedListener);\n      publisherRef.current.on('destroyed', () => {\n        publisherRef.current = null;\n        console.log(publisherRef);\n        console.log('publisherRef.current Destroyed');\n      });\n\n      return () => {\n        publisherRef.current.off('streamCreated', streamCreatedListener);\n        publisherRef.current.off('streamDestroyed', streamDestroyedListener);\n        publisherRef.current.off('destroyed', () => {});\n      };\n    },\n    [getDevices, streamCreatedListener, streamDestroyedListener]\n  );\n\n  const destroyPublisher = useCallback(() => {\n    if (!publisherRef.current) {\n      return;\n    }\n    if (publisherRef.current) {\n      publisherRef.current.destroy();\n    }\n  }, []);\n\n  const publish = useCallback(\n    ({ session, containerId, publisherOptions }) => {\n      if (!publisherRef.current) {\n        initPublisher(containerId, publisherOptions);\n      }\n      if (session && publisherRef.current && !isPublishing) {\n        return new Promise((resolve, reject) => {\n          session.publish(publisherRef.current, (err) => {\n            if (err) {\n              console.log('Publisher Error', err);\n              setIsPublishing(false);\n              publisherRef.current = null;\n              setPublisherError(true);\n              reject(err);\n            }\n            console.log('Published');\n            resolve(publisherRef.current);\n          });\n        });\n      } else if (publisherRef.current) {\n        // nothing to do\n      }\n    },\n    [initPublisher, isPublishing]\n  );\n\n  const unpublish = useCallback(\n    ({ session }) => {\n      if (publisherRef.current && isPublishing && session) {\n        session.unpublish(publisherRef.current);\n        setIsPublishing(false);\n        publisherRef.current = null;\n      }\n    },\n    [isPublishing]\n  );\n\n  return {\n    publisher: publisherRef.current,\n    initPublisher,\n    destroyPublisher,\n    publish,\n    pubInitialised,\n    unpublish,\n    isPublishing,\n    publisherError,\n    deviceInfo,\n  };\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport OT from '@opentok/client';\n\nexport default function useDevices() {\n  const [deviceInfo, setDeviceInfo] = useState({\n    audioInputDevices: [],\n    videoInputDevices: [],\n    audioOutputDevices: [],\n  });\n\n  const getDevices = useCallback(async () => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      console.warn('enumerateDevices() not supported.');\n      return;\n    }\n    return new Promise((resolve, reject) => {\n      OT.getDevices(async (err, devices) => {\n        if (err) {\n          reject(err);\n        }\n        let audioOutputDevices = await OT.getAudioOutputDevices();\n        // audioOutputDevices = audioOutputDevices.map((audiooutput) =>\n        //     audiooutput.deviceId === 'default'\n        //         ? { ...audiooutput, label: 'System Default' }\n        //         : audiooutput\n        // );\n        const audioInputDevices = devices.filter(\n          (d) => d.kind.toLowerCase() === 'audioinput'\n        );\n        const videoInputDevices = devices.filter(\n          (d) => d.kind.toLowerCase() === 'videoinput'\n        );\n\n        setDeviceInfo({\n          audioInputDevices,\n          videoInputDevices,\n          audioOutputDevices,\n        });\n      });\n    });\n  }, []);\n\n  useEffect(() => {\n    navigator.mediaDevices.addEventListener('devicechange', getDevices);\n\n    getDevices();\n\n    return () => {\n      navigator.mediaDevices.removeEventListener('devicechange', getDevices);\n    };\n  }, [getDevices]);\n\n  return { deviceInfo, getDevices };\n}\n","import React from \"react\";\n\nimport Mic from \"@material-ui/icons/Mic\";\nimport Switch from \"@material-ui/core/Switch\";\n\nexport const AudioSettings = React.memo(\n  ({ hasAudio, onAudioChange, className }) => {\n    return (\n      <div className={className}>\n        <Mic />\n        <div>Microphone</div>\n        <Switch\n          checked={hasAudio}\n          onChange={onAudioChange}\n          name=\"AudioToggle\"\n        />\n      </div>\n    );\n  }\n);\n","import React from \"react\";\n\nimport Videocam from \"@material-ui/icons/Videocam\";\nimport Switch from \"@material-ui/core/Switch\";\n\nexport const VideoSettings = React.memo(\n  ({ hasVideo, onVideoChange, className }) => {\n    // const [enabled, setEnabled] = useState(hasAudio);\n    console.log(\"Video Setting\", hasVideo);\n    return (\n      <div className={className}>\n        <Videocam />\n        <div>Video</div>\n        <Switch\n          checked={hasVideo}\n          onChange={onVideoChange}\n          name=\"VideoToggle\"\n        />\n      </div>\n    );\n  }\n);\n","import { makeStyles } from '@material-ui/core/styles';\nimport { blueGrey, green, red } from '@material-ui/core/colors';\nexport default makeStyles((theme) => ({\n  waitingRoomContainer: {\n    position: 'absolute',\n    left: '50%',\n    top: '50%',\n    display: 'flex',\n    flexDirection: 'column',\n    transform: 'translate(-50%, -50%)',\n    backgroundColor: blueGrey[100],\n    padding: '10px 20px',\n    borderRadius: 5,\n    width: '360px'\n  },\n  waitingRoomVideoContainer: {\n    width: '360px',\n    height: '264px'\n  },\n  deviceContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: '5px 0'\n  },\n  deviceSettings: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    alignItems: 'center'\n  },\n  selectWidth: {\n    width: '200px'\n  },\n  networkTestContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: '10px 5px'\n  },\n  flex: {\n    display: 'flex'\n  },\n  green: {\n    color: green[600]\n  },\n  red: {\n    color: red[600]\n  },\n  containerCenter: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    margin: '3px',\n    flexDirection: 'column'\n  }\n}));","/**\n * For both audio and video\n * \n * @param {*} inputDevices \n * @param {*} currentSource \n * @returns String toReturn\n */\n\n// const getAudioSourceDeviceId = (audioInputDevices, currentAudioSource) => {\n//   let toReturn = '';\n//   console.log('getAudioSourceDeviceId', audioInputDevices, currentAudioSource);\n//   if (!audioInputDevices || !currentAudioSource) {\n//     return toReturn;\n//   }\n//   for (let i = 0; i < audioInputDevices.length; i += 1) {\n//     if (audioInputDevices[i].label === currentAudioSource.label) {\n//       toReturn = audioInputDevices[i].deviceId;\n//       break;\n//     }\n//   }\n//   return toReturn;\n// };\n// export { getAudioSourceDeviceId };\n\nconst getSourceDeviceId = (inputDevices, currentSource) => {\n  let toReturn = '';\n  console.log('getSourceDeviceId', inputDevices, currentSource);\n  if (!inputDevices || !currentSource) {\n    return toReturn;\n  }\n  for (let i = 0; i < inputDevices.length; i += 1) {\n    if (inputDevices[i].label === currentSource.label) {\n      toReturn = inputDevices[i].deviceId;\n      break;\n    }\n  }\n  return toReturn;\n};\n\nexport { getSourceDeviceId };\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport OT from '@opentok/client';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Button,\n  FormControl,\n  InputLabel,\n  MenuItem,\n  Select,\n  TextField,\n} from '@material-ui/core';\nimport { usePublisher } from '../../hooks/usePublisher';\nimport { AudioSettings } from '../AudioSetting';\nimport { VideoSettings } from '../VideoSetting';\nimport { UserContext } from '../../context/UserContext';\nimport useStyles from './styles';\nimport { getSourceDeviceId } from '../../utils';\n\nexport default function WaitingRoom() {\n  const classes = useStyles();\n  const { preferences, setPreferences } = useContext(UserContext);\n  const { push } = useHistory();\n  const defaultLocalAudio = true;\n  const defaultLocalVideo = true;\n  const [localAudio, setLocalAudio] = useState(defaultLocalAudio);\n  const [localVideo, setLocalVideo] = useState(defaultLocalVideo);\n  const [localVideoSource, setLocalVideoSource] = useState(undefined);\n  const [localAudioSource, setLocalAudioSource] = useState(undefined);\n  const [localAudioOutput, setLocalAudioOutput] = useState(undefined);\n  let [audioDevice, setAudioDevice] = useState('');\n  let [videoDevice, setVideoDevice] = useState('');\n  let [audioOutputDevice, setAudioOutputDevice] = useState('');\n  const [specialty, setSpecialty] = useState('PRIMARYCARE');\n  const [roomName, setRoomName] = useState('');\n  const [userName, setUserName] = useState('');\n  const [isRoomNameInvalid, setIsRoomNameInvalid] = useState(false);\n  const [isUserNameInvalid, setIsUserNameInvalid] = useState(false);\n  const waitingRoomVideoContainer = useRef();\n\n  const {\n    publisher,\n    initPublisher,\n    destroyPublisher,\n    deviceInfo,\n    pubInitialised,\n  } = usePublisher();\n\n  const handleAudioChange = React.useCallback((e) => {\n    setLocalAudio(e.target.checked);\n  }, []);\n\n  const handleVideoChange = React.useCallback((e) => {\n    setLocalVideo(e.target.checked);\n  }, []);\n\n  const handleVideoSource = React.useCallback(\n    (e) => {\n      const videoDeviceId = e.target.value;\n      setVideoDevice(e.target.value);\n      publisher.setVideoSource(videoDeviceId);\n      setLocalVideoSource(videoDeviceId);\n    },\n    [publisher, setVideoDevice, setLocalVideoSource]\n  );\n\n  const handleAudioSource = React.useCallback(\n    (e) => {\n      const audioDeviceId = e.target.value;\n      setAudioDevice(audioDeviceId);\n      publisher.setAudioSource(audioDeviceId);\n      setLocalAudioSource(audioDeviceId);\n    },\n    [publisher, setAudioDevice, setLocalAudioSource]\n  );\n\n  const handleAudioOutput = React.useCallback(\n    (e) => {\n      const audioOutputId = e.target.value;\n      setAudioOutputDevice(audioOutputId);\n      OT.setAudioOutputDevice(audioOutputId);\n      setLocalAudioOutput(audioOutputId);\n    },\n    [setLocalAudioOutput, setAudioOutputDevice]\n  );\n\n  const validateForm = () => {\n    console.log('validateForm', userName);\n    console.log('validateForm', roomName);\n    if (userName === '') {\n      setIsUserNameInvalid(true);\n      return false;\n    } else if (roomName === '') {\n      setIsRoomNameInvalid(true);\n      return false;\n    }\n    return true;\n  };\n\n  const handleJoinClick = () => {\n    if (validateForm()) {\n      localStorage.setItem('username', userName);\n      localStorage.setItem('specialty', specialty);\n      push(`room/${roomName}`);\n    }\n  };\n\n  const onChangeRoomName = (e) => {\n    const roomName = e.target.value;\n    if (roomName === '' || roomName.trim() === '') {\n      // Space detected\n      setRoomName('');\n      return;\n    }\n    setIsRoomNameInvalid(false);\n    setRoomName(roomName);\n  };\n\n  const onChangeParticipantName = (e) => {\n    const userName = e.target.value;\n    if (userName === '' || userName.trim() === '') {\n      // Space detected\n      setUserName('');\n      return;\n    }\n    setIsUserNameInvalid(false);\n    setUserName(userName);\n  };\n\n  const onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      handleJoinClick();\n    }\n  };\n\n  useEffect(() => {\n    const publisherOptions = {\n      publishAudio: defaultLocalAudio,\n      publishVideo: defaultLocalVideo,\n    };\n    if (waitingRoomVideoContainer.current) {\n      initPublisher(waitingRoomVideoContainer.current.id, publisherOptions);\n    }\n  }, [initPublisher, defaultLocalAudio, defaultLocalVideo]);\n\n  useEffect(() => {\n    if (publisher) {\n      publisher.publishAudio(localAudio);\n    }\n  }, [localAudio, publisher]);\n\n  useEffect(() => {\n    if (publisher) {\n      publisher.publishVideo(localVideo);\n    }\n  }, [localVideo, publisher]);\n\n  useEffect(() => {\n    if (publisher && pubInitialised && deviceInfo) {\n      const currentAudioDevice = publisher.getAudioSource();\n      setAudioDevice(\n        getSourceDeviceId(deviceInfo.audioInputDevices, currentAudioDevice)\n      );\n\n      const currentVideoDevice = publisher.getVideoSource();\n      setVideoDevice(\n        getSourceDeviceId(\n          deviceInfo.videoInputDevices,\n          currentVideoDevice?.track\n        )\n      );\n\n      OT.getActiveAudioOutputDevice().then((currentAudioOutputDevice) => {\n        setAudioOutputDevice(currentAudioOutputDevice.deviceId);\n      });\n    }\n  }, [\n    deviceInfo,\n    publisher,\n    setAudioDevice,\n    setVideoDevice,\n    setAudioOutputDevice,\n    pubInitialised,\n  ]);\n\n  useEffect(() => {\n    return () => {\n      destroyPublisher();\n    };\n  }, [destroyPublisher]);\n\n  useEffect(() => {\n    if (\n      localAudio !== preferences.defaultSettings.publishAudio ||\n      localVideo !== preferences.defaultSettings.publishVideo ||\n      localAudioSource !== preferences.defaultSettings.audioSource ||\n      localVideoSource !== preferences.defaultSettings.videoSource ||\n      localAudioOutput !== preferences.defaultSettings.localAudioOutput\n    )\n      setPreferences({\n        ...preferences,\n        defaultSettings: {\n          publishAudio: localAudio,\n          publishVideo: localVideo,\n          audioSource: localAudioSource,\n          videoSource: localVideoSource,\n          audioOutput: localAudioOutput,\n        },\n      });\n  }, [\n    localAudio,\n    localVideo,\n    setPreferences,\n    localAudioSource,\n    localVideoSource,\n    localAudioOutput,\n    preferences,\n  ]);\n\n  return (\n    <div className={classes.waitingRoomContainer}>\n      <div className={classes.containerCenter}>\n        <div className={classes.waitingRoomVideoPreview}>\n          <form className={classes.form} noValidate>\n            <FormControl fullWidth>\n              <InputLabel id=\"specialty-select-label\">\n                Medical Specialty\n              </InputLabel>\n              <Select\n                size=\"small\"\n                labelId=\"specialty-select-label\"\n                id=\"specialty-select\"\n                name=\"specialty\"\n                value={specialty}\n                onChange={(e) => setSpecialty(e.target.value)}\n              >\n                {[\n                  'PRIMARYCARE',\n                  'CARDIOLOGY',\n                  'NEUROLOGY',\n                  'ONCOLOGY',\n                  'RADIOLOGY',\n                  'UROLOGY',\n                ].map((value, key) => (\n                  <MenuItem key={key} value={value}>\n                    {value}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n            <TextField\n              size=\"small\"\n              variant=\"outlined\"\n              margin=\"dense\"\n              required\n              fullWidth\n              id=\"room-name\"\n              label=\"Room Name\"\n              name=\"roomName\"\n              autoComplete=\"Room Name\"\n              error={isRoomNameInvalid}\n              autoFocus\n              // helperText={roomName === '' ? 'Empty Field' : ' '}\n              value={roomName}\n              onChange={onChangeRoomName}\n              onKeyDown={onKeyDown}\n            />\n            <TextField\n              size=\"small\"\n              variant=\"outlined\"\n              margin=\"none\"\n              fullWidth\n              id=\"publisher-name\"\n              label=\"Name\"\n              name=\"name\"\n              error={isUserNameInvalid}\n              required\n              autoComplete=\"Name\"\n              // helperText={userName === '' ? 'Empty Field' : ' '}\n              value={userName}\n              onChange={onChangeParticipantName}\n              onKeyDown={onKeyDown}\n            />\n          </form>\n          <div className={classes.deviceContainer}>\n            <>\n              <FormControl margin=\"dense\">\n                <InputLabel id=\"demo-simple-select-label\">\n                  Select Audio Source\n                </InputLabel>\n                <Select\n                  labelId=\"demo-simple-select-label\"\n                  id=\"demo-simple-select\"\n                  value={audioDevice}\n                  onChange={handleAudioSource}\n                  autoWidth={true}\n                >\n                  {deviceInfo.audioInputDevices.map((device) => (\n                    <MenuItem key={device.deviceId} value={device.deviceId}>\n                      {device.label}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n\n              <FormControl margin=\"dense\">\n                <InputLabel id=\"video\">Select Audio Output</InputLabel>\n                {deviceInfo.audioOutputDevices && (\n                  <Select\n                    labelId=\"video\"\n                    id=\"demo-simple-select\"\n                    value={audioOutputDevice}\n                    onChange={handleAudioOutput}\n                    autoWidth={true}\n                  >\n                    {deviceInfo.audioOutputDevices.map((device) => (\n                      <MenuItem key={device.deviceId} value={device.deviceId}>\n                        {device.label}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                )}\n              </FormControl>\n\n              <FormControl margin=\"dense\">\n                <InputLabel id=\"video\">Select Video Source</InputLabel>\n                {deviceInfo.videoInputDevices && (\n                  <Select\n                    labelId=\"video\"\n                    id=\"demo-simple-select\"\n                    value={videoDevice}\n                    onChange={handleVideoSource}\n                    autoWidth={true}\n                  >\n                    {deviceInfo.videoInputDevices.map((device) => (\n                      <MenuItem key={device.deviceId} value={device.deviceId}>\n                        {device.label}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                )}\n              </FormControl>\n            </>\n          </div>\n          <div className={classes.deviceContainer}>\n            <AudioSettings\n              className={classes.deviceSettings}\n              hasAudio={localAudio}\n              onAudioChange={handleAudioChange}\n            />\n            <VideoSettings\n              className={classes.deviceSettings}\n              hasVideo={localVideo}\n              onVideoChange={handleVideoChange}\n            />\n          </div>\n          <div\n            id=\"waiting-room-video-container\"\n            className={classes.waitingRoomVideoContainer}\n            ref={waitingRoomVideoContainer}\n          ></div>\n        </div>\n      </div>\n      <div className={classes.containerCenter}>\n        <Button variant=\"contained\" color=\"secondary\" onClick={handleJoinClick}>\n          Join Call\n        </Button>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useRef, useCallback } from 'react';\n\nimport _ from 'lodash';\nimport OT from '@opentok/client';\n// const OT = window.OT;\n\nexport function useSession({ container }) {\n  const [connected, setConnected] = useState(false);\n  const [streams, setStreams] = useState([]);\n  const sessionRef = useRef(null);\n  const [status, setNetworkStatus] = useState(null);\n  const [isArchiving, setIsArchiving] = useState(false);\n\n  const addStream = ({ stream }) => {\n    setStreams((prev) => [...prev, stream]);\n  };\n\n  const removeStream = ({ stream }) => {\n    setStreams((prev) =>\n      prev.filter((prevStream) => prevStream.id !== stream.id)\n    );\n  };\n\n  const isExperienceComposer = () => {\n    const queryString = window.location.pathname;\n    return queryString.split('/')[2] === 'virtualviewer';\n  };\n\n  const isRecorder = () => {\n    const queryString = window.location.pathname;\n    return queryString.split('/')[2] === 'recorder';\n  };\n\n  const shouldSubscribe = (name) => {\n    // if (name.split('_')[1] === 'EC') return false;\n    return name !== 'EC';\n    // if (name === 'EC') return false;\n    // else return true;\n  };\n\n  const subscribe = React.useCallback(\n    (stream, options = {}) => {\n      console.log(stream);\n      if (sessionRef.current && container.current) {\n        const finalOptions = Object.assign({}, options, {\n          insertMode: 'append',\n          width: '100%',\n          height: '100%',\n          fitMode: 'contain',\n          style: {\n            buttonDisplayMode: 'on',\n            nameDisplayMode: 'on',\n          },\n          showControls: true,\n          subscribeToVideo: shouldSubscribe(stream.name),\n          // subscribeToAudio: shouldSubscribeToVideo(stream.name),\n          // subscribeToAudio: !isExperienceComposer(),\n          subscribeToAudio: shouldSubscribe(stream.name),\n          //   isExperienceComposer() && stream.name === 'EC' ? false : true,\n        });\n        const subscriber = sessionRef.current.subscribe(\n          stream,\n          shouldSubscribe(stream.name) ? container.current.id : null,\n          finalOptions\n        );\n      }\n    },\n    [container]\n  );\n\n  const onStreamCreated = useCallback(\n    (event) => {\n      console.log('stream created event ' + event.stream.name);\n      console.log(' subscribe to video ' + shouldSubscribe(event.stream.name));\n      console.log('is experience composer ' + isExperienceComposer());\n\n      subscribe(event.stream);\n      addStream({ stream: event.stream });\n    },\n    [subscribe]\n  );\n\n  const onStreamDestroyed = useCallback((event) => {\n    removeStream({ stream: event.stream });\n  }, []);\n\n  const onArchiveStarted = useCallback((event) => {\n    setIsArchiving(true);\n  }, []);\n\n  const onArchiveStopped = useCallback((event) => {\n    setIsArchiving(false);\n  }, []);\n\n  const onSessionDisconnected = useCallback((event) => {\n    setNetworkStatus('disconnected');\n  }, []);\n  const onSessionReconnecting = useCallback((event) => {\n    setNetworkStatus('reconnecting');\n  }, []);\n\n  const onConnectionDestroyed = useCallback(\n    (event) => {\n      console.log(event);\n      if (container.current) container.current = null;\n    },\n    [container]\n  );\n\n  const createSession = useCallback(\n    ({ apiKey, sessionId, token }) => {\n      if (!apiKey) {\n        throw new Error('Missing apiKey');\n      }\n\n      if (!sessionId) {\n        throw new Error('Missing sessionId');\n      }\n\n      if (!token) {\n        throw new Error('Missing token');\n      }\n\n      sessionRef.current = OT.initSession(apiKey, sessionId, {});\n      const eventHandlers = {\n        streamCreated: onStreamCreated,\n        streamDestroyed: onStreamDestroyed,\n        sessionReconnecting: onSessionReconnecting,\n        sessionDisconnected: onSessionDisconnected,\n        connectionDestoyed: onConnectionDestroyed,\n        archiveStarted: onArchiveStarted,\n        archiveStopped: onArchiveStopped,\n      };\n      sessionRef.current.on(eventHandlers);\n      return new Promise((resolve, reject) => {\n        sessionRef.current.connect(token, (err) => {\n          if (!sessionRef.current) {\n            // Either this session has been disconnected or OTSession\n            // has been unmounted so don't invoke any callbacks\n            return;\n          }\n          if (err) {\n            reject(err);\n          } else if (!err) {\n            console.log('Session Connected!');\n            setConnected(true);\n            resolve(sessionRef.current);\n          }\n        });\n      });\n    },\n    [\n      onArchiveStarted,\n      onArchiveStopped,\n      onConnectionDestroyed,\n      onSessionDisconnected,\n      onSessionReconnecting,\n      onStreamCreated,\n      onStreamDestroyed,\n    ]\n  );\n\n  const destroySession = React.useCallback(() => {\n    if (sessionRef.current) {\n      sessionRef.current.on('disconnected', () => {\n        sessionRef.current = null;\n      });\n      sessionRef.current.disconnect();\n    }\n  }, []);\n\n  return {\n    session: sessionRef,\n    connected,\n    createSession,\n    destroySession,\n    streams,\n    status,\n    isArchiving,\n  };\n}\n","import { makeStyles } from '@material-ui/core/styles';\n// export default makeStyles((theme)=>{\nexport default makeStyles({\n  selected: {\n    color: '#b779ff'\n  }\n});\n","// import MicIcon from '@material-ui/icons/Mic';\nimport MicIcon from '@mui/icons-material/Mic';\nimport MicOffIcon from '@mui/icons-material/MicOff';\nimport { IconButton } from '@material-ui/core';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport React from 'react';\nimport styles from './styles.js';\n\nexport default function MuteAudioButton({\n  toggleAudio,\n  hasAudio,\n  classes,\n  handleAudioChange,\n}) {\n  const title = hasAudio ? 'Disable Microphone' : 'Enable Microphone';\n  const localClasses = styles();\n  // console.log(classes);\n\n  // const { deviceInfo } = useDevices();\n  // const [devicesAvailable, setDevicesAvailable] = React.useState(null);\n  // const [options, setOptions] = React.useState([]);\n  // const [open, setOpen] = React.useState(false);\n  // const anchorRef = React.useRef(null);\n  // const [selectedIndex, setSelectedIndex] = React.useState(0);\n  // const [audioDeviceId, setAudioDeviceId] = React.useState('');\n\n  // React.useEffect(() => {\n  //   setDevicesAvailable(deviceInfo.audioInputDevices);\n\n  //   if (cameraPublishing && devicesAvailable) {\n  //     getAudioSource().then((id) => setAudioDeviceId(id));\n\n  //     const indexOfSelectedElement = devicesAvailable.indexOf(\n  //       devicesAvailable.find((e) => e.deviceId === audioDeviceId)\n  //     );\n\n  //     setSelectedIndex(indexOfSelectedElement);\n  //   }\n  // }, [\n  //   cameraPublishing,\n  //   getAudioSource,\n  //   deviceInfo,\n  //   audioDeviceId,\n  //   devicesAvailable\n  // ]);\n\n  // React.useEffect(() => {\n  //   if (devicesAvailable) {\n  //     const audioDevicesAvailable = devicesAvailable.map((e) => {\n  //       return e.label;\n  //     });\n  //     setOptions(audioDevicesAvailable);\n  //   }\n  // }, [devicesAvailable]);\n\n  // const handleChangeAudioSource = (event, index) => {\n  //   setSelectedIndex(index);\n  //   console.log(index);\n  //   setOpen(false);\n  //   const audioDeviceId = devicesAvailable.find(\n  //     (device) => device.label === event.target.textContent\n  //   ).deviceId;\n  //   changeAudioSource(audioDeviceId);\n  // };\n\n  // const handleToggle = (e) => {\n  //   setOpen((prevOpen) => !prevOpen);\n  // };\n\n  // const handleClose = (event) => {\n  //   if (anchorRef.current && anchorRef.current.contains(event.target)) {\n  //     return;\n  //   }\n  //   setOpen(false);\n  // };\n\n  return (\n    <>\n      <Tooltip title={title} aria-label=\"add\">\n        <IconButton\n          edge=\"start\"\n          color=\"inherit\"\n          aria-label=\"mic\"\n          onClick={handleAudioChange}\n          className={`${classes.toolbarButtons} ${\n            !hasAudio ? classes.disabledButton : ''\n          }\n          `}\n        >\n          {!hasAudio ? (\n            <MicOffIcon fontSize=\"large\" />\n          ) : (\n            <MicIcon fontSize=\"large\" />\n          )}\n        </IconButton>\n      </Tooltip>\n    </>\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles({\n  selected: {\n    color: '#b779ff',\n    backgroundColor: 'black'\n  }\n});\n","import VideoCam from '@mui/icons-material/Videocam';\nimport VideocamOff from '@mui/icons-material/VideocamOff';\nimport { IconButton } from '@material-ui/core';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\n// import ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport React from 'react';\nimport styles from './styles.js';\n\nexport default function MuteVideoButton({\n  classes,\n  hasVideo,\n  handleVideoChange,\n}) {\n  const title = hasVideo ? 'Disable Camera' : 'Enable Camera';\n  // console.log('[MuteVideoButton] - hasVideo', hasVideo);\n\n  const [devicesAvailable, setDevicesAvailable] = React.useState(null);\n  const [options, setOptions] = React.useState([]);\n  const [open, setOpen] = React.useState(false);\n  const anchorRef = React.useRef(null);\n  const [selectedIndex, setSelectedIndex] = React.useState(0);\n  const localClasses = styles();\n\n  // React.useEffect(() => {\n  //   setDevicesAvailable(deviceInfo.videoInputDevices);\n\n  //   if (cameraPublishing) {\n  //     const currentDeviceId = getVideoSource()?.deviceId;\n\n  //     const IndexOfSelectedElement = devicesAvailable.indexOf(\n  //       devicesAvailable.find((e) => e.deviceId === currentDeviceId)\n  //     );\n  //     setSelectedIndex(IndexOfSelectedElement);\n  //   }\n  // }, [cameraPublishing, getVideoSource, deviceInfo]);\n\n  // React.useEffect(() => {\n  //   if (devicesAvailable) {\n  //     const videoDevicesAvailable = devicesAvailable.map((e) => {\n  //       return e.label;\n  //     });\n  //     setOptions(videoDevicesAvailable);\n  //   }\n  // }, [devicesAvailable]);\n\n  // const handleChangeVideoSource = (event, index) => {\n  //   setSelectedIndex(index);\n  //   setOpen(false);\n  //   const videoDeviceId = devicesAvailable.find(\n  //     (device) => device.label === event.target.textContent\n  //   ).deviceId;\n  //   changeVideoSource(videoDeviceId);\n  // };\n\n  // const handleToggle = (e) => {\n  //   setOpen((prevOpen) => !prevOpen);\n  // };\n\n  // const handleClose = (event) => {\n  //   if (anchorRef.current && anchorRef.current.contains(event.target)) {\n  //     return;\n  //   }\n  //   setOpen(false);\n  // };\n\n  return (\n    <>\n      <Tooltip title={title} aria-label=\"add\">\n        <IconButton\n          onClick={handleVideoChange}\n          edge=\"start\"\n          aria-label=\"videoCamera\"\n          size=\"small\"\n          className={`${classes.arrowButton} ${\n            !hasVideo ? classes.disabledButton : ''\n          }`}\n        >\n          {!hasVideo ? (\n            <VideocamOff fontSize=\"large\" />\n          ) : (\n            <VideoCam fontSize=\"large\" />\n          )}\n        </IconButton>\n      </Tooltip>\n    </>\n  );\n}\n","import {\n  Document,\n  Page,\n  Text,\n  View,\n  StyleSheet,\n  Image,\n} from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  page: {\n    display: 'flex',\n    flexDirection: 'column',\n    // justifyContent: 'center',\n    // alignItems: 'center',\n    backgroundColor: 'white',\n  },\n  section: {\n    display: 'flex',\n    flexDirection: 'column',\n\n    backgroundColor: 'white',\n    padding: 10,\n  },\n  text: {\n    color: '#000000',\n  },\n});\n\nexport const MyDocument = ({ data }) => (\n  <Document>\n    <Page style={styles.page} size=\"A4\">\n      <View style={styles.section}>\n        <Image\n          src={\n            'https://upload.wikimedia.org/wikipedia/commons/5/5a/Vonage_Logo.png'\n          }\n          // alt=\"Vonage image\"\n          style={{\n            // objectFit: 'contain',\n            maxWidth: '150px',\n            maxHeight: '100',\n          }}\n        />\n        <Text\n          style={{\n            padding: '10px',\n          }}\n        >\n          Captions\n        </Text>\n\n        {data?.map((e) => (\n          <>\n            {/* <li key ={e.text}> */}\n            <Text style={{ fontSize: '6px' }}>{e ? e.timestamp : null}</Text>\n            <Text style={{ color: '#3388af', fontSize: '12px', margin: '6px' }}>\n              {data ? `${e.speaker} : ${e.text}` : '...'}\n            </Text>\n            {/* <li/> */}\n          </>\n        ))}\n      </View>\n    </Page>\n  </Document>\n);\n","import { useState, useCallback, useEffect, useContext } from 'react';\n// import { Message } from '../entities/ChatMessage';\n// import { UserContext } from '../context/UserContext';\nimport { v4 as uuid } from 'uuid';\nimport { usePDFMine } from './usePDFMine';\n\nexport function useSignalling({ session }) {\n  const [messages, setMessages] = useState(null);\n  const [entities, setEntities] = useState(null);\n  const [archiveId, setArchiveId] = useState(null);\n  const [renderedSesion, setRenderedSession] = useState(null);\n  const [medication, setMedicationEntities] = useState([]);\n  const [medicalConditions, setMedicalConditionsEntities] = useState([]);\n  const [anatomyEntities, setAnatomyEntities] = useState([]);\n  const [piiEntities, setPiiEntities] = useState([]);\n  const [ttpEntities, setTtpEntities] = useState([]);\n  //   const { user } = useContext(UserContext);\n\n  const signal = useCallback(\n    async ({ type, data }) => {\n      return new Promise((resolve, reject) => {\n        const payload = JSON.parse(JSON.stringify({ type, data }));\n        if (session) {\n          session.signal(payload, (err) => {\n            if (err) reject(err);\n            else resolve();\n          });\n        }\n      });\n    },\n    [session]\n  );\n\n  const archiveListener = useCallback(({ data }) => {\n    console.log(data);\n    const archiveId = data.split(':')[0];\n    const sessionRendered = data.split(':')[1];\n    setArchiveId(archiveId);\n    setRenderedSession(sessionRendered);\n  }, []);\n\n  const sendMessage = useCallback(\n    (message) => {\n      return signal({ type: 'message', data: message });\n    },\n    [signal]\n  );\n\n  const medicationListener = useCallback(({ data, from }) => {\n    const dataJson = JSON.parse(data);\n    // const medString = `${dataJson[0].Description} | ${dataJson[0].Code}`;\n    // setMedicationEntities((prev) => [...prev, medString]);\n    //console.log(dataJson)\n    if (dataJson.length) {\n      dataJson.forEach((entity) => {\n        if (entity?.Category === 'MEDICATION') {\n          setMedicationEntities((prev) => [\n            {\n              Text: `${entity.Text} | ${\n                Math.floor(entity.Score * 10000) / 100\n              }%`,\n              concepts: entity.RxNormConcepts ? entity.RxNormConcepts : [],\n            },\n            ...prev,\n          ]);\n        }\n      });\n    }\n  }, []);\n\n  const medConditionListener = useCallback(({ data, from }) => {\n    const dataJson = JSON.parse(data);\n    // const medString = `${dataJson[0].Description} | ${dataJson[0].Code}`;\n    // setMedicalConditionsEntities((prev) => [...prev, medString]);\n    if (dataJson.length) {\n      dataJson.forEach((entity) => {\n        if (entity?.Category === 'MEDICAL_CONDITION') {\n          setMedicalConditionsEntities((prev) => [\n            {\n              Text: `${entity.Text} | ${\n                Math.floor(entity.Score * 10000) / 100\n              }%`,\n              concepts: entity.ICD10CMConcepts ? entity.ICD10CMConcepts : [],\n            },\n            ...prev,\n          ]);\n        }\n      });\n    }\n  }, []);\n\n  const entitiesListener = useCallback(({ data, from }) => {\n    const dataJson = JSON.parse(data);\n    if (dataJson.length) {\n      dataJson.forEach((entity) => {\n        if (entity?.Category === 'ANATOMY')\n          setAnatomyEntities((prev) => [\n            {\n              Text: `${entity.Type} | ${entity.Text}`,\n            },\n            ...prev,\n          ]);\n\n        if (entity?.Category === 'PROTECTED_HEALTH_INFORMATION')\n          setPiiEntities((prev) => [\n            {\n              Text: `${entity.Type} | ${entity.Text}`,\n            },\n            ...prev,\n          ]);\n\n        if (entity?.Category === 'TEST_TREATMENT_PROCEDURE') {\n          var attribute =\n            entity.Attributes && entity.Attributes[0]\n              ? ' | ' + entity.Attributes[0].Text\n              : '';\n          setTtpEntities((prev) => [\n            {\n              Text: entity.Text + attribute,\n            },\n            ...prev,\n          ]);\n        }\n      });\n    }\n  }, []);\n\n  const messageListener = useCallback(({ data, from }) => {\n    console.log('received message');\n    console.log(JSON.stringify(data));\n    setMessages(data);\n  }, []);\n\n  useEffect(() => {\n    if (session) {\n      session.on('signal:captions', messageListener);\n      session.on('signal:medicalEntities', entitiesListener);\n      session.on('signal:archiveStarted', archiveListener);\n      session.on('signal:medication', medicationListener);\n      session.on('signal:medCondition', medConditionListener);\n    }\n    return function cleanup() {\n      if (session) {\n        session.off('signal:captions', messageListener);\n        session.off('signal:archiveStarted', archiveListener);\n        session.off('signal:medicalEntities', entitiesListener);\n        session.off('signal:medication', medicationListener);\n        session.off('signal:medCondition', medicationListener);\n      }\n    };\n  }, [\n    session,\n    messageListener,\n    archiveListener,\n    entitiesListener,\n    medicationListener,\n    medConditionListener,\n  ]);\n\n  return {\n    sendMessage,\n    messages,\n    archiveId,\n    renderedSesion,\n    medicalConditions,\n    medication,\n    piiEntities,\n    anatomyEntities,\n    ttpEntities,\n  };\n}\n","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles((theme) => ({\n  activeRecordingIcon: {\n    boxShadow: '0 0 0 0 rgba(213, 15, 45, 1)',\n    animation: 'pulse-red 2s infinite',\n    borderRadius: '100%',\n  },\n}));\n","import { useState, useContext } from 'react';\nimport {\n  startRecording,\n  stopRecording,\n  render,\n  stopRender,\n  addArchiveStream,\n} from '../../api/fetchRecording';\n\nimport { useSignalling } from '../../hooks/useSignalling';\n\nimport { UserContext } from '../../context/UserContext';\n\nimport FiberManualRecordIcon from '@mui/icons-material/FiberManualRecord';\nimport { IconButton } from '@material-ui/core';\nimport styles from './styles';\nimport Tooltip from '@mui/material/Tooltip';\nimport { useParams } from 'react-router';\nimport { useEffect } from 'react';\n\nexport default function RecordingButton({ classes, session, isArchiving }) {\n  const { preferences, setPreferences } = useContext(UserContext);\n  let { roomName } = useParams();\n  const { archiveId } = useSignalling({ session });\n  // const [isArchiving, setRecording] = useState(false);\n  const [renderId, setRenderId] = useState(null);\n  const [sessionId, setSessionId] = useState(null);\n  const localClasses = styles();\n\n  const startRender = async (roomName) => {\n    if (isArchiving) return;\n    try {\n      const renderData = await render(roomName);\n      if ((renderData.status = 200 && renderData.data)) {\n        const { id, sessionId } = renderData.data;\n        // console.log(renderData.data);\n        // setRenderId('12334');\n        preferences.renderId = id;\n        preferences.sessionId = sessionId;\n        setRenderId(id);\n        // setRecording(true);\n        setSessionId(sessionId);\n      } else return;\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    console.log('run preferences hook');\n    if (\n      renderId !== preferences.renderId ||\n      archiveId !== preferences.archiveId ||\n      sessionId !== preferences.sessionId\n    ) {\n      if (renderId) {\n        setPreferences({\n          ...preferences,\n          renderId: renderId,\n          archiveId: archiveId,\n          sessionId: sessionId,\n        });\n      }\n    }\n  }, [renderId, setPreferences, archiveId, preferences, sessionId]);\n\n  useEffect(() => {\n    if (preferences.recording !== isArchiving) {\n      setPreferences({\n        ...preferences,\n        recording: isArchiving,\n      });\n    }\n    // } else {\n    //   setPreferences({\n    //     ...preferences,\n    //     recording: false,\n    //   });\n    // }\n  }, [isArchiving, preferences, setPreferences]);\n\n  const stopRenderAndRecording = async (renderId) => {\n    if (renderId) {\n      try {\n        const renderData = await stopRender(renderId);\n        console.log(renderData);\n        if ((renderData.status = 200)) {\n          handleRecordingStop(archiveId);\n          setRenderId(null);\n        } else return;\n      } catch (e) {\n        console.log(e);\n      }\n    } else return;\n  };\n\n  const handleRecordingStop = async (archiveId) => {\n    try {\n      if (isArchiving && archiveId) {\n        const data = await stopRecording(archiveId);\n        console.log(data);\n        if (data.status === 200 && data.data) {\n          const { status } = data.data;\n          // setRecording(false);\n        }\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleRecordingAction = () => {\n    console.log('trying to start recording');\n    isArchiving ? stopRenderAndRecording(renderId) : startRender(roomName);\n    // ? handleRecordingStop(archiveId)\n    // : handleRecordingStart(sessionId);\n  };\n\n  const title = isArchiving ? 'Stop Recording' : 'Start Recording';\n\n  return (\n    <Tooltip title={title} aria-label=\"add\">\n      <IconButton\n        // edge=\"start\"\n        // color=\"inherit\"\n        // edge=\"start\"\n        aria-label=\"record\"\n        onClick={handleRecordingAction}\n        // size=\"small\"\n        className={classes.toolbarButtons}\n      >\n        {isArchiving ? (\n          <FiberManualRecordIcon\n            fontSize=\"large\"\n            className={localClasses.activeRecordingIcon}\n            style={{ color: '#D50F2C' }}\n          />\n        ) : (\n          <FiberManualRecordIcon fontSize=\"large\" />\n        )}\n      </IconButton>\n    </Tooltip>\n  );\n}\n","import ExitToAppIcon from '@mui/icons-material/ExitToApp';\nimport { IconButton } from '@material-ui/core';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nexport default function EndCallIcon({ classes, handleEndCall }) {\n  return (\n    <Tooltip title=\"End call\" aria-label=\"add\">\n      <IconButton\n        edge=\"start\"\n        color=\"inherit\"\n        aria-label=\"videoCamera\"\n        className={classes.toolbarButtons}\n        style={{ backgroundColor: '#D50F2C' }}\n        onClick={handleEndCall}\n      >\n        <ExitToAppIcon fontSize=\"inherit\" />\n      </IconButton>\n    </Tooltip>\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles((theme) => ({\n  toolbarContainer: {\n    backgroundColor: theme.palette.toolbarBackground.main,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: '90px',\n    // margin: theme.spacing(2),\n    borderRadius: '18px',\n  },\n  paper: {\n    position: 'absolute',\n    display: 'flex',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  toolbarMobileContainer: {\n    backgroundColor: theme.palette.toolbarBackground.main,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: '60px',\n    margin: theme.spacing(2),\n    borderRadius: '25px',\n  },\n  toolbarButtons: {\n    margin: theme.spacing(1),\n    borderRadius: '5em',\n    backgroundColor: '#32353A',\n    color: '#fff',\n  },\n  arrowButton: {\n    borderRadius: '5em',\n    height: '50px',\n    width: '50px',\n    backgroundColor: '#32353A',\n    color: '#fff',\n  },\n  infoButton: {\n    position: 'absolute',\n    left: '0',\n    margin: theme.spacing(1),\n    borderRadius: '5em',\n    height: '50px',\n    width: '50px',\n    backgroundColor: '#32353A',\n    color: '#fff',\n  },\n  groupButton: {\n    margin: '8px',\n  },\n  disabledButton: {\n    backgroundColor: theme.palette.activeButtons.red,\n    '&:hover': {\n      backgroundColor: theme.palette.activeButtons.red,\n    },\n  },\n  activeButton: {\n    backgroundColor: theme.palette.activeButtons.green,\n    '&:hover': {\n      backgroundColor: theme.palette.activeButtons.green,\n    },\n  },\n  activeButtonIcon: {\n    color: theme.palette.activeButtons.green,\n  },\n}));\n","import React from 'react';\n\nimport MuteAudioButton from '../MuteAudioButton';\nimport MuteVideoButton from '../MuteVideoButton';\nimport RecordButton from '../RecordButton';\nimport EndCallButton from '../EndCallButton';\nimport { useSignalling } from '../../hooks/useSignalling';\nimport { useHistory } from 'react-router-dom';\nimport { useParams } from 'react-router';\nimport { usePublisher } from '../../hooks/usePublisher';\nimport { useSession } from '../../hooks/useSession';\nimport { UserContext } from '../../context/UserContext';\n\nimport styles from './styles';\n\nfunction ToolBar({\n  session,\n  handleVideoChange,\n  handleAudioChange,\n  hasVideo,\n  hasAudio,\n  publisher,\n  isArchiving,\n}) {\n  const classes = styles();\n  const { push } = useHistory();\n  const { roomName } = useParams();\n  const { renderedSesion } = useSignalling({ session });\n  const { preferences } = React.useContext(UserContext);\n\n  const endCall = () => {\n    if (publisher) {\n      // session.disconnect();\n      // publisher.destroy();\n      push(`/mta/${roomName}/${preferences.sessionId}/end`);\n    }\n  };\n  return (\n    <div className=\"toolbar\">\n      <MuteAudioButton\n        classes={classes}\n        handleAudioChange={handleAudioChange}\n        hasAudio={hasAudio}\n      />\n      <MuteVideoButton\n        classes={classes}\n        handleVideoChange={handleVideoChange}\n        hasVideo={hasVideo}\n      />\n      <RecordButton\n        classes={classes}\n        session={session}\n        isArchiving={isArchiving}\n      />\n      <EndCallButton classes={classes} handleEndCall={endCall} />\n    </div>\n  );\n}\n\nexport default ToolBar;\n","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles({\n    root: {\n        top: '0',\n        background: ({ wsStatus }) => {\n            if (wsStatus === 'disconnected') return '#f19c38';\n            if (wsStatus === 'reconnecting') return '#f19c38';\n            if (wsStatus === 'reconnected') return '#4caf50';\n        },\n        /* width: '100%', */\n        justifyContent: 'center',\n    },\n    info: {\n        top: '0',\n        background: '#418be9',\n        justifyContent: 'center',\n    },\n    action: {\n        position: 'absolute',\n        right: '0',\n        paddingRight: '10px',\n    },\n    networkStatusIcons: {\n        paddingRight: '10px',\n    },\n    snackBarContent: {\n        display: 'flex',\n        alignItems: 'flex-end',\n        fontSize: '14px'\n    },\n});\n","import { useEffect, useRef, useState, useCallback, useContext } from 'react';\nimport { useParams } from 'react-router';\n\nimport Banner from '../Banner';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport Collapse from '@mui/material/Collapse';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport MedicalInformationIcon from '@mui/icons-material/MedicalInformation';\nimport VaccinesIcon from '@mui/icons-material/Vaccines';\nimport MedicationIcon from '@mui/icons-material/Medication';\nimport BloodtypeIcon from '@mui/icons-material/Bloodtype';\nimport Typography from '@mui/material/Typography';\nimport ContactPageIcon from '@mui/icons-material/ContactPage';\nimport MonitorHeart from '@mui/icons-material/MonitorHeart';\n\nfunction EntitiesList({ listOfEntities, entity }) {\n  const getIcon = (entity) => {\n    switch (entity) {\n      case 'Medical Condition':\n        return <MedicalInformationIcon />;\n      case 'Medication':\n        return <MedicationIcon />;\n      case 'Anatomy':\n        return <BloodtypeIcon />;\n      case 'Treatments':\n        return <VaccinesIcon />;\n      case 'PII':\n        return <ContactPageIcon />;\n      case 'Test Treatment Procedures':\n        return <MonitorHeart />;\n      default:\n        return;\n    }\n  };\n\n  const getBgColor = (entity) => {\n    switch (entity) {\n      case 'Medical Condition':\n        return '#5cceff';\n      case 'Medication':\n        return '#f0e442';\n      case 'Anatomy':\n        return '#d185af';\n      case 'Treatments':\n        return '#4a9';\n      case 'PII':\n        return '#999';\n      case 'Test Treatment Procedures':\n        return '#4a9';\n      default:\n        return;\n    }\n  };\n  return (<>\n    <List>\n      <ListItem key={entity} disablePadding>\n        <ListItemIcon>{getIcon(entity)}</ListItemIcon>\n        \n        <Typography\n        style={{ background: getBgColor(entity), padding: '0px' }}\n            variant=\"div\"\n            component=\"div\"\n            gutterBottom\n          >\n            {entity}\n          </Typography>\n        </ListItem>\n    </List>\n    <List sx={{\n      pl:2,\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: 100,\n      overflow: \"hidden\",\n      overflowY: \"scroll\",\n      bgcolor: 'background.paper'\n    }}>\n      {listOfEntities\n        ? listOfEntities.map((e, i) => <div key={`${e.Text}-${i}`} >\n          <ListItem disablePadding>\n            <ListItemText primary={e.Text} />\n          </ListItem>\n          <Collapse in={true} timeout=\"auto\" unmountOnExit sx={{pl:2}}>\n          <List component=\"div\" disablePadding>\n          {e.concepts && e.concepts.length > 0?\n            <Select value='0' size=\"small\">\n              {e.concepts.map((_e, _i) => \n                <MenuItem key={`item-${i}-${_i}`} value={_i} >\n                  {`${_e.Code} | ${_e.Description} | ${ Math.floor(_e.Score * 10000)/100 }%`}\n                </MenuItem>\n                )}\n            </Select>\n            : ''}\n            </List>\n            </Collapse>\n        </div>)\n        : ''}\n    </List>\n  </>);\n}\n\nexport default EntitiesList;\n","import { useEffect, useRef, useState, useCallback, useContext } from 'react';\nimport { useParams } from 'react-router';\n\nimport { usePublisher } from '../../hooks/usePublisher';\nimport { useSession } from '../../hooks/useSession';\nimport { stopRender, stopRecording } from '../../api/fetchRecording';\nimport ToolBar from '../ToolBar';\nimport { getCredentials } from '../../api/fetchCreds';\nimport { UserContext } from '../../context/UserContext';\nimport { useSignalling } from '../../hooks/useSignalling';\nimport { usePDFMine } from '../../hooks/usePDFMine';\nimport { PDFDownloadLink, Document, Page } from '@react-pdf/renderer';\n\nimport EntitiesList from '../EntitiesList';\nimport { MessageSharp } from '@material-ui/icons';\n\nfunction Main() {\n  // const [timePlayingLeft, setTime] = useState(0);\n  const videoContainer = useRef();\n  let { roomName } = useParams();\n  const { preferences, setPreferences } = useContext(UserContext);\n  const [captions, setCaptions] = useState({\n    text: 'Say something...',\n    speaker: '',\n  });\n\n  const [credentials, setCredentials] = useState(null);\n  const [error, setError] = useState(null);\n  const [hasAudio, setHasAudio] = useState(true);\n  const [hasVideo, setHasVideo] = useState(true);\n  const [userId, setUserId] = useState(null);\n  // const [translationPlaying, setTranslationPlaying] = useState(false);\n\n  const {\n    session,\n    createSession,\n    connected,\n    status,\n    destroySession,\n    isArchiving,\n  } = useSession({\n    container: videoContainer,\n  });\n\n  const { MyDocument, instance } = usePDFMine();\n  // const medicalConditions = ['heart failure', 'type 2 diabetes', 'lung cancer'];\n  const {\n    messages,\n    sendMessage,\n    medication,\n    medicalConditions,\n    piiEntities,\n    anatomyEntities,\n    ttpEntities,\n  } = useSignalling({\n    session: session.current,\n  });\n\n  const {\n    publisher,\n    publish,\n    pubInitialised,\n    isPublishing,\n    publisherError,\n    destroyPublisher,\n    unpublish,\n  } = usePublisher();\n\n  useEffect(() => {\n    setCaptions(messages);\n  }, [messages]);\n\n  useEffect(() => {\n    console.log(messages);\n    console.log(preferences);\n\n    if (\n      messages &&\n      preferences.messages?.[preferences.messages.length - 1]?.text !=\n        messages.text\n      // preferences.messages.length\n    ) {\n      const messagesWithDate = {\n        ...messages,\n        timestamp: new Date().toTimeString(),\n      };\n      setPreferences({\n        ...preferences,\n        messages: [...preferences.messages, messagesWithDate],\n      });\n    }\n  }, [messages, preferences, setPreferences]);\n\n  useEffect(() => {\n    getCredentials(roomName)\n      .then(({ data }) => {\n        console.log('Credential data: ', data);\n        setCredentials({\n          apiKey: data.apiKey,\n          sessionId: data.sessionId,\n          token: data.token,\n        });\n        setUserId(data.userId);\n      })\n      .catch((err) => {\n        setError(err);\n        console.log(err);\n      });\n  }, [roomName]);\n\n  useEffect(() => {\n    if (credentials) {\n      const { apiKey, sessionId, token } = credentials;\n      console.log(apiKey);\n      createSession({ apiKey, sessionId, token });\n    }\n  }, [createSession, credentials]);\n\n  const handleAudioChange = useCallback(() => {\n    if (hasAudio) {\n      publisher.publishAudio(false);\n      setHasAudio(false);\n    } else {\n      publisher.publishAudio(true);\n      setHasAudio(true);\n    }\n  }, [hasAudio, publisher]);\n\n  const handleVideoChange = useCallback(() => {\n    if (hasVideo) {\n      publisher.publishVideo(false);\n      setHasVideo(false);\n      try {\n      } catch (e) {\n        console.log(e);\n      }\n    } else {\n      publisher.publishVideo(true);\n      setHasVideo(true);\n      try {\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }, [hasVideo, publisher]);\n\n  useEffect(() => {\n    if (\n      session.current &&\n      connected &&\n      !pubInitialised &&\n      videoContainer.current\n    ) {\n      // todo It might be better to change state of this component.\n      publish({\n        session: session.current,\n        containerId: videoContainer.current.id,\n      });\n    }\n  }, [publish, session, connected, pubInitialised]);\n\n  useEffect(() => {\n    return () => {\n      destroyPublisher();\n    };\n  }, [destroyPublisher]);\n\n  return (\n    <>\n      <div className=\"videoContainer\">\n        <div\n          className={'video'}\n          ref={videoContainer}\n          id=\"video-container\"\n        ></div>\n        <div\n          className=\"medicalAnalysis\"\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            maxHeight: 820,\n            overflow: 'hidden',\n            overflowY: 'scroll',\n          }}\n        >\n          <div className=\"entityType\">\n            <EntitiesList\n              listOfEntities={medicalConditions}\n              entity={'Medical Condition'}\n            />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList listOfEntities={medication} entity={'Medication'} />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList listOfEntities={anatomyEntities} entity={'Anatomy'} />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList listOfEntities={piiEntities} entity={'PII'} />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList\n              listOfEntities={ttpEntities}\n              entity={'Test Treatment Procedures'}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"original\">\n        {captions ? `${captions.speaker}: ${captions.text}` : ''}\n      </div>\n\n      <ToolBar\n        handleAudioChange={handleAudioChange}\n        handleVideoChange={handleVideoChange}\n        session={session.current}\n        hasAudio={hasAudio}\n        hasVideo={hasVideo}\n        publisher={publisher}\n        isArchiving={isArchiving}\n      />\n    </>\n  );\n}\n\nexport default Main;\n","import { useState, useEffect, useCallback } from 'react';\nimport {\n  usePDF,\n  Document,\n  Page,\n  Text,\n  View,\n  StyleSheet,\n} from '@react-pdf/renderer';\nimport { MyDocument } from '../utils/document';\n\nexport function usePDFMine() {\n  const [captions, setCaptions] = useState(null);\n  const document = <MyDocument data={captions} />;\n  const [instance, update] = usePDF({ document: document });\n\n  const styles = StyleSheet.create({\n    page: {\n      flexDirection: 'row',\n      backgroundColor: '#E4E4E4',\n    },\n    section: {\n      margin: 10,\n      padding: 10,\n      flexGrow: 1,\n    },\n    text: {\n      color: '#000000',\n    },\n  });\n\n  const MyDocuments = ({ captiones }) => (\n    <Document>\n      <Page size=\"A4\" style={styles.page}>\n        <View style={styles.section}>\n          <Text>{captions}</Text>\n        </View>\n        <View style={styles.section}>\n          <Text style={styles.text}>\n            Section #2 Lorem, ipsum dolor sit amet consectetur adipisicing elit.\n            Natus debitis perferendis exercitationem nesciunt, dolorem pariatur?\n            Iste beatae, ullam modi, maxime asperiores aspernatur totam\n            voluptatibus quod perferendis laborum doloremque vero consequatur.\n          </Text>\n        </View>\n      </Page>\n    </Document>\n  );\n\n  return { MyDocuments, captions };\n}\n","import { makeStyles } from '@material-ui/core/styles';\n// export default makeStyles((theme)=>{\nexport default makeStyles({\n  flex: {\n    height: '100vh',\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'nowrap',\n    justifyContent: 'flex-start',\n    alignContent: 'stretch',\n    alignItems: 'flex-start',\n  },\n});\n","import Main from '../Main';\nimport styles from './styles.js';\nimport React from 'react';\n\nfunction Wrapper() {\n  const classes = styles();\n  return (\n    <div className={classes.flex}>\n      <Main />\n    </div>\n  );\n}\n\nexport default Wrapper;\n","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles((theme) => ({\n  banner: {\n    zIndex: 1,\n    // flexGrow: 0.1,\n    margin: '200px',\n    height: '100px',\n    width: '50%',\n    // position: 'absolute'\n    alignItems: 'center',\n    borderRadius: '30px',\n    backgroundColor: 'black',\n  },\n  container: {\n    ['@media (min-width:768px)']: {\n      marginTop: 10,\n      display: 'flex',\n      flexDirection: 'row',\n    },\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    alignContent: 'center',\n  },\n  new__meeting: {\n    color: 'rgb(43,158,250)',\n  },\n\n  meetingInfo: {\n    margin: '100px',\n    width: '50%',\n    height: '100px',\n    color: 'white',\n  },\n  recording: {\n    display: 'flex',\n    flexDirection: 'row',\n    margin: '5px',\n    padding: '5px',\n  },\n  root: {\n    minWidth: 275,\n    margin: 'auto',\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  centeredFlex: {\n    justifyContent: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    backgroundColor: 'black',\n    color: 'white',\n    borderRadius: '30px',\n  },\n}));\n","import { useEffect, useState, useContext } from 'react';\nimport { fetchRecordings } from '../../api/fetchRecording';\nimport { useParams } from 'react-router';\nimport GetAppIcon from '@mui/icons-material/GetApp';\nimport { IconButton } from '@material-ui/core';\nimport { useSignalling } from '../../hooks/useSignalling';\n\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport { useHistory } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport { usePublisher } from '../../hooks/usePublisher';\nimport { PDFDownloadLink } from '@react-pdf/renderer';\nimport { MyDocument } from '../../utils/document';\nimport { UserContext } from '../../context/UserContext';\n\nimport styles from './styles';\n\nexport default function EndCall() {\n  const { push } = useHistory();\n  const { preferences, setPreferences } = useContext(UserContext);\n  const [recordings, setRecordings] = useState(null);\n  const classes = styles();\n  const { sessionId } = useParams();\n  const [data, setData] = useState([]);\n\n  const { destroyPublisher } = usePublisher();\n\n  const redirectNewMeeting = () => {\n    push('/');\n  };\n  useEffect(() => {\n    // destroyPublisher();\n    // if (sessionId !== 'undefined') {\n    console.log(sessionId);\n    fetchRecordings(sessionId)\n      .then((data) => {\n        if (data.data) {\n          setRecordings(data.data);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n\n        setRecordings(null);\n      });\n  }, [sessionId, destroyPublisher]);\n\n  useEffect(() => {\n    if (preferences.messages) {\n      setData(preferences.messages);\n    }\n  }, [data, preferences.messages]);\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.meetingInfo}>\n        <h2 style={{ color: 'white' }}>We hope you enjoyed your meeting</h2>\n        <h2 style={{ color: 'white' }}>This was powered by Vonage</h2>\n\n        <IconButton\n          onClick={redirectNewMeeting}\n          className={classes.new__meeting}\n        >\n          Start new meeting\n        </IconButton>\n\n        <IconButton\n          // onClick={redirectNewMeeting}\n          className={classes.new__meeting}\n        >\n          <PDFDownloadLink\n            style={{ color: 'rgb(43,158,250)' }}\n            document={<MyDocument data={data} />}\n            fileName=\"transcript.pdf\"\n          >\n            {({ blob, url, loading, error }) =>\n              loading ? 'Loading document...' : 'Download Transcript'\n            }\n          </PDFDownloadLink>\n        </IconButton>\n      </div>\n      <div className={classes.banner}>\n        <Card className={classes.centeredFlex} variant=\"outlined\">\n          <CardContent>\n            {recordings && recordings.length ? (\n              <h3 style={{ color: 'white' }}>Recordings</h3>\n            ) : (\n              <h3>There are no recordings</h3>\n            )}\n          </CardContent>\n          <CardActions>\n            <div className={classes.root}>\n              {recordings ? (\n                <div className={classes.recording}>\n                  <ul>\n                    {recordings.map((recording) => (\n                      <li key={recording.id}>\n                        Started at: {Date(recording.createdAt)}\n                        {recording.status === 'available' ? (\n                          <Button\n                            color=\"inherit\"\n                            edge=\"start\"\n                            target=\"_blank\"\n                            href={recording.url}\n                          >\n                            <GetAppIcon />\n                          </Button>\n                        ) : null}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ) : null}\n            </div>\n          </CardActions>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nimport { UserContext } from '../../context/UserContext';\n\nconst ProtectedRoute = ({ component: Component, ...rest }) => {\n  const { preferences } = useContext(UserContext);\n  const roomName = rest?.computedMatch?.params?.roomName;\n\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        !roomName ? (\n          <Redirect\n            to={{\n              pathname: '/',\n              //   state: { room: roomName },\n            }}\n          />\n        ) : (\n          <Component {...props} />\n        )\n      }\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles((theme) => ({\n  header: {\n    flex: '0.5 1 auto',\n    alignSelf: 'stretch',\n    margin: 'auto',\n    padding: '15px 30px',\n    display: 'flex',\n    background: 'linear-gradient(to right, #8728fb, #fea18c) !important',\n    color: '#fff',\n    width: '100%',\n    alignItems: 'center',\n  },\n}));\n","import React from 'react';\n\nimport styles from './styles';\n\nfunction Header() {\n  const classes = styles();\n  return (\n    <div className={classes.header}>\n      <img\n        src={process.env.PUBLIC_URL + '/Vonage.png'}\n        className=\"vonage-logo\"\n        alt=\"vonage-logo\"\n        style={{ height: 50, alignSelf: 'center' }}\n      />\n      <h3 className=\"text\">Video Translation (Patent Pending)</h3>\n    </div>\n  );\n}\n\nexport default Header;\n","import { makeStyles } from '@material-ui/core/styles';\n// export default makeStyles((theme)=>{\nexport default makeStyles({\n  flex: {\n    height: '100vh',\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'nowrap',\n    justifyContent: 'flex-start',\n    alignContent: 'stretch',\n    alignItems: 'flex-start',\n  },\n});\n","import Main from '../Main';\nimport Header from '../Header';\nimport styles from './styles.js';\nimport React from 'react';\n\nimport { useEffect, useRef, useState, useCallback, useContext } from 'react';\nimport { useParams } from 'react-router';\n\nimport { usePublisher } from '../../hooks/usePublisher';\nimport { useSession } from '../../hooks/useSession';\n\nimport ToolBar from '../ToolBar';\nimport { getVirtualViewerCredentials } from '../../api/fetchCreds';\nimport { UserContext } from '../../context/UserContext';\nimport { useSignalling } from '../../hooks/useSignalling';\nimport EntitiesList from '../EntitiesList';\n\nfunction VirtualView() {\n  let translationPlaying = useRef(false);\n  const [userId, setUserId] = useState(null);\n  const [credentials, setCredentials] = useState(null);\n  let timePlayingLeft = useRef(0);\n  // const [timePlayingLeft, setTime] = useState(0);\n  const videoContainer = useRef();\n  let { roomName } = useParams();\n  const { preferences } = useContext(UserContext);\n\n  const [captions, setCaptions] = useState({\n    text: 'Say something...',\n    speaker: '',\n  });\n  const { session, createSession, connected, streams } = useSession({\n    container: videoContainer,\n  });\n\n  const {\n    messages,\n    sendMessage,\n    medication,\n    medicalConditions,\n    piiEntities,\n    anatomyEntities,\n    ttpEntities,\n  } = useSignalling({\n    session: session.current,\n  });\n\n  const isVirtualView = () => {\n    if (session) return session.connection.data === 'virtual';\n    else return;\n  };\n\n  useEffect(() => {\n    getVirtualViewerCredentials(roomName)\n      .then(({ data }) => {\n        setCredentials({\n          apiKey: data.apiKey,\n          sessionId: data.sessionId,\n          token: data.token,\n        });\n        setUserId(data.userId);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [roomName]);\n\n  useEffect(() => {\n    if (credentials) {\n      const { apiKey, sessionId, token } = credentials;\n      console.log(apiKey);\n      createSession({ apiKey, sessionId, token });\n    }\n  }, [createSession, credentials]);\n\n  useEffect(() => {\n    setCaptions(messages);\n  }, [messages]);\n\n  const classes = styles();\n  return (\n    <>\n      <div className=\"videoContainer\">\n        <div\n          className={'video'}\n          ref={videoContainer}\n          id=\"video-container\"\n        ></div>\n        <div\n          className=\"medicalAnalysis\"\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            maxHeight: 820,\n            overflow: 'hidden',\n            overflowY: 'scroll',\n          }}\n        >\n          <div className=\"entityType\">\n            <EntitiesList\n              listOfEntities={medicalConditions}\n              entity={'Medical Condition'}\n            />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList listOfEntities={medication} entity={'Medication'} />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList listOfEntities={anatomyEntities} entity={'Anatomy'} />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList listOfEntities={piiEntities} entity={'PII'} />\n          </div>\n          <div className=\"entityType\">\n            <EntitiesList\n              listOfEntities={ttpEntities}\n              entity={'Test Treatment Procedures'}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"original\">\n        {captions ? `${captions.speaker}: ${captions.text}` : ''}\n      </div>\n    </>\n  );\n}\n\nexport default VirtualView;\n","import logo from './logo.svg';\nimport './App.css';\nimport WaitingRoom from './components/WaitingRoom';\nimport Wrapper from './components/Wrapper';\nimport EndCall from './components/EndCall';\n\nimport { createTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { UserContext } from './context/UserContext';\nimport { useMemo, useState } from 'react';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport VirtualView from './components/VirtualView';\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\n\nlet primary = process.env.REACT_APP_PALETTE_PRIMARY || '#b779ff';\nlet secondary = process.env.REACT_APP_PALETTE_SECONDARY || '#d6219c';\n\nconst theme = () => {\n  return createTheme({\n    palette: {\n      type: 'light',\n      primary: {\n        main: primary,\n      },\n      secondary: {\n        main: secondary,\n      },\n      bodyBackground: {\n        black: '#131415',\n      },\n      callBackground: {\n        main: '#20262D',\n      },\n      toolbarBackground: {\n        main: '#41464D',\n      },\n      activeButtons: {\n        green: '#1C8731',\n        red: '#D50F2C',\n      },\n    },\n  });\n};\n\nfunction App() {\n  const [preferences, setPreferences] = useState({\n    name: null,\n    defaultSettings: {},\n    messages: [],\n    renderId: null,\n    archiveId: null,\n    recording: false,\n    sessionId: null,\n  });\n  const preferencesValue = useMemo(\n    () => ({ preferences, setPreferences }),\n    [preferences, setPreferences]\n  );\n  return (\n    <ThemeProvider theme={theme()}>\n      <Router>\n        <UserContext.Provider value={preferencesValue}>\n          <Switch>\n            <Route exact path=\"/mta/:roomName/:sessionId/end\">\n              <EndCall />\n            </Route>\n            <ProtectedRoute exact path=\"/room/:roomName\" component={Wrapper} />\n\n            {/* <Route path=\"/videorti/virtualviewer/:roomName\">\n              <VirtualView />\n            </Route> */}\n            <Route path=\"/videorti/recorder/:roomName\">\n              <VirtualView />\n            </Route>\n            <Route path=\"/\">\n              <WaitingRoom />\n            </Route>\n            <Route path=\"*\">\n              <Redirect\n                to={{\n                  pathname: '/',\n                }}\n              />\n            </Route>\n          </Switch>\n        </UserContext.Provider>\n      </Router>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}