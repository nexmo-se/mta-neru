(this["webpackJsonpsimple-vapile"]=this["webpackJsonpsimple-vapile"]||[]).push([[0],{212:function(e,t,n){},213:function(e,t,n){},260:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(18),o=n.n(r),i=(n(212),n(5)),s=(n.p,n(213),n(52)),l=n.n(s),u=n(17),d=n(339),b=n(364),j=n(357),f=n(367),O=n(368),h=n(343),p=Object(a.createContext)(),g=n(45),m=n.n(g),v="".concat("http://localhost:5001");v="".concat("https://neru-ca37991c-neru-mta-project-prod.euw1.serverless.vonage.com");var x=function(e){return m.a.post("".concat(v,"/render"),{roomName:e})},C=function(e){return m.a.get("".concat(v,"/render/stop/").concat(e))},y=function(e){return m.a.get("".concat(v,"/archive/stop/").concat(e))},k=n(22),S=n(44),I=n(32);var w="http://localhost:5001";console.log("production",w),w="".concat("https://neru-ca37991c-neru-mta-project-prod.euw1.serverless.vonage.com");var D=function(){var e=Object(I.a)(Object(k.a)().mark((function e(t){return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.get("".concat(w,"/session/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(I.a)(Object(k.a)().mark((function e(t,n,a){return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.post("".concat(w,"/startStreaming"),{streamId:t,sessionId:n,specialty:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function E(){var e=Object(u.h)().roomName,t=Object(a.useContext)(p).preferences,n=Object(a.useState)(!1),r=Object(i.a)(n,2),o=r[0],s=r[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),j=b[0],f=b[1],O=Object(a.useRef)(),h=Object(a.useState)(null),g=Object(i.a)(h,2),m=g[0],v=g[1],x=Object(a.useState)(null),w=Object(i.a)(x,2),D=w[0],E=w[1],A=Object(a.useState)(null),R=Object(i.a)(A,2),P=R[0],M=R[1],V=function(){var e=Object(a.useState)({audioInputDevices:[],videoInputDevices:[],audioOutputDevices:[]}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useCallback)(Object(I.a)(Object(k.a)().mark((function e(){return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return console.warn("enumerateDevices() not supported."),e.abrupt("return");case 3:return e.abrupt("return",new Promise((function(e,t){l.a.getDevices(function(){var e=Object(I.a)(Object(k.a)().mark((function e(n,a){var r,o,i;return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&t(n),e.next=3,l.a.getAudioOutputDevices();case 3:r=(r=e.sent).map((function(e){return"default"===e.deviceId?Object(S.a)(Object(S.a)({},e),{},{label:"System Default"}):e})),o=a.filter((function(e){return"audioinput"===e.kind.toLowerCase()})),i=a.filter((function(e){return"videoinput"===e.kind.toLowerCase()})),c({audioInputDevices:o,videoInputDevices:i,audioOutputDevices:r});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})));case 4:case"end":return e.stop()}}),e)}))),[]);return Object(a.useEffect)((function(){return navigator.mediaDevices.addEventListener("devicechange",r),r(),function(){navigator.mediaDevices.removeEventListener("devicechange",r)}}),[r]),{deviceInfo:n,getDevices:r}}(),B=V.deviceInfo,T=(V.getDevices,c.a.useCallback((function(n){var a=n.stream;console.log(a),t.streamId=a.id;var c=a.publisher.session.id;console.log(c),M(c),console.log({roomName:e,specialty:localStorage.getItem("specialty")}),N(a.id,c,localStorage.getItem("specialty")).then((function(e){console.log(e.data),console.log("setting connectionId "+e.data.connectionId),E(e.data.connectionId)})).catch((function(e){return console.log(e)})),s(!0)}),[t])),F=Object(a.useCallback)((function(e){e.stream;console.log("destroyed publisher"),O.current=null,f(!1),s(!1)}),[]),z=Object(a.useCallback)((function(e,n){if(console.log("UsePublisher - initPublisher"),O.current)console.log("UsePublisher - Already initiated");else{e||console.log("UsePublisher - Container not available");var a=Object.assign({},n,{width:"100%",height:"100%",name:t.name,publishVideo:!0,publishAudio:!0,style:{buttonDisplayMode:"on",nameDisplayMode:"on"},insertMode:"append",showControls:!0,fitMode:"contain"});console.log("usePublisher finalPublisherOptions",a),O.current=l.a.initPublisher(e,a,(function(e){e&&(console.log("[usePublisher]",e),O.current=null),console.log("Publisher Created")})),f(!0),O.current.on("streamCreated",T),O.current.on("streamDestroyed",F)}}),[t.name,T,F]),L=Object(a.useCallback)((function(){O.current&&(P&&D&&O.current.destroy(),t.renderId&&t.archiveId&&(C(t.renderId).then((function(e){return console.log(e)})),y(t.archiveId).then((function(e){return console.log(e)}))),O.current.on("destroyed",(function(){console.log("publisherRef.current Destroyed")})))}),[D,t.archiveId,t.renderId,P]),W=Object(a.useCallback)((function(e){var t=e.session,n=e.containerId,a=e.publisherOptions;if(O.current||z(n,a),t&&O.current&&!o)return new Promise((function(e,n){t.publish(O.current,(function(t){t&&(console.log("Publisher Error",t),s(!1),O.current=null,v(!0),n(t)),console.log("Published"),e(O.current)}))}));O.current}),[z,o]),Y=Object(a.useCallback)((function(e){var t=e.session;O.current&&o&&(t.unpublish(O.current),s(!1),O.current=null)}),[o,O]);return{publisher:O.current,initPublisher:z,destroyPublisher:L,publish:W,pubInitialised:j,unpublish:Y,isPublishing:o,publisherError:m,deviceInfo:B}}var A=n(156),R=n.n(A),P=n(363),M=n(2),V=c.a.memo((function(e){var t=e.hasAudio,n=e.onAudioChange,a=e.className;return Object(M.jsxs)("div",{className:a,children:[Object(M.jsx)(R.a,{}),Object(M.jsx)("div",{children:"Microphone"}),Object(M.jsx)(P.a,{checked:t,onChange:n,name:"AudioToggle"})]})})),B=n(158),T=n.n(B),F=c.a.memo((function(e){var t=e.hasVideo,n=e.onVideoChange,a=e.className;return console.log("Video Setting",t),Object(M.jsxs)("div",{className:a,children:[Object(M.jsx)(T.a,{}),Object(M.jsx)("div",{children:"Video"}),Object(M.jsx)(P.a,{checked:t,onChange:n,name:"VideoToggle"})]})})),z=n(337),L=n(338),W=n(109),Y=n(108),J=Object(z.a)((function(e){return{waitingRoomContainer:{position:"absolute",left:"50%",top:"50%",display:"flex",flexDirection:"column",transform:"translate(-50%, -50%)",backgroundColor:L.a[100],padding:"10px 20px",borderRadius:5,width:"360px"},waitingRoomVideoContainer:{width:"360px",height:"264px"},deviceContainer:{display:"flex",flexDirection:"column",margin:"5px 0"},deviceSettings:{display:"flex",justifyContent:"space-around",alignItems:"center"},selectWidth:{width:"200px"},networkTestContainer:{display:"flex",flexDirection:"column",margin:"10px 5px"},flex:{display:"flex"},green:{color:W.a[600]},red:{color:Y.a[600]},containerCenter:{display:"flex",justifyContent:"center",alignItems:"center",margin:"3px",flexDirection:"column"}}})),K=function(e,t){var n="";if(console.log("getSourceDeviceId",e,t),!e||!t)return n;for(var a=0;a<e.length;a+=1)if(e[a].label===t.label){n=e[a].deviceId;break}return n};function _(){var e=J(),t=Object(a.useContext)(p),n=(t.preferences,t.setPreferences),r=Object(u.g)().push,o=!0,s=!0,g=Object(a.useState)(o),m=Object(i.a)(g,2),v=m[0],x=m[1],C=Object(a.useState)(s),y=Object(i.a)(C,2),k=y[0],S=y[1],I=Object(a.useState)(void 0),w=Object(i.a)(I,2),D=w[0],N=w[1],A=Object(a.useState)(void 0),R=Object(i.a)(A,2),P=R[0],B=R[1],T=Object(a.useState)(void 0),z=Object(i.a)(T,2),L=z[0],W=z[1],Y=Object(a.useState)(""),_=Object(i.a)(Y,2),G=_[0],U=_[1],H=Object(a.useState)(""),q=Object(i.a)(H,2),Q=q[0],X=q[1],Z=Object(a.useState)(""),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)("PRIMARYCARE"),ae=Object(i.a)(ne,2),ce=ae[0],re=ae[1],oe=Object(a.useState)(""),ie=Object(i.a)(oe,2),se=ie[0],le=ie[1],ue=Object(a.useState)(""),de=Object(i.a)(ue,2),be=de[0],je=de[1],fe=Object(a.useState)(!1),Oe=Object(i.a)(fe,2),he=Oe[0],pe=Oe[1],ge=Object(a.useState)(!1),me=Object(i.a)(ge,2),ve=me[0],xe=me[1],Ce=Object(a.useRef)(),ye=E(),ke=ye.publisher,Se=ye.initPublisher,Ie=ye.destroyPublisher,we=ye.deviceInfo,De=ye.pubInitialised,Ne=c.a.useCallback((function(e){x(e.target.checked)}),[]),Ee=c.a.useCallback((function(e){S(e.target.checked)}),[]),Ae=c.a.useCallback((function(e){var t=e.target.value;X(e.target.value),ke.setVideoSource(t),N(t)}),[ke,X,N]),Re=c.a.useCallback((function(e){var t=e.target.value;U(t),ke.setAudioSource(t),B(t)}),[ke,U,B]),Pe=c.a.useCallback((function(e){var t=e.target.value;te(t),l.a.setAudioOutputDevice(t),W(t)}),[W,te]),Me=function(){console.log("validateForm",be),console.log("validateForm",se),(""===be?(xe(!0),0):""!==se||(pe(!0),0))&&(localStorage.setItem("username",be),localStorage.setItem("specialty",ce),r("room/".concat(se)))},Ve=function(e){13===e.keyCode&&Me()};return Object(a.useEffect)((function(){var e={publishAudio:o,publishVideo:s};Ce.current&&Se(Ce.current.id,e)}),[Se,o,s]),Object(a.useEffect)((function(){ke&&ke.publishAudio(v)}),[v,ke]),Object(a.useEffect)((function(){ke&&ke.publishVideo(k)}),[k,ke]),Object(a.useEffect)((function(){ke&&De&&we&&ke.on("accessAllowed",(function(e){var t=ke.getAudioSource();U(K(we.audioInputDevices,t));var n=ke.getVideoSource();X(K(we.videoInputDevices,null===n||void 0===n?void 0:n.track)),l.a.getActiveAudioOutputDevice().then((function(e){te(e.deviceId)}))}))}),[we,ke,U,X,te,De]),Object(a.useEffect)((function(){return function(){Ie()}}),[Ie]),Object(a.useEffect)((function(){n({defaultSettings:{publishAudio:v,publishVideo:k,audioSource:P,videoSource:D,audioOutput:L}})}),[v,k,n,P,D,L]),Object(M.jsxs)("div",{className:e.waitingRoomContainer,children:[Object(M.jsx)("div",{className:e.containerCenter,children:Object(M.jsxs)("div",{className:e.waitingRoomVideoPreview,children:[Object(M.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(M.jsxs)(d.a,{fullWidth:!0,children:[Object(M.jsx)(b.a,{id:"specialty-select-label",children:"Medical Specialty"}),Object(M.jsx)(j.a,{size:"small",labelId:"specialty-select-label",id:"specialty-select",name:"specialty",value:ce,onChange:function(e){return re(e.target.value)},children:["PRIMARYCARE","CARDIOLOGY","NEUROLOGY","ONCOLOGY","RADIOLOGY","UROLOGY"].map((function(e,t){return Object(M.jsx)(f.a,{value:e,children:e},t)}))})]}),Object(M.jsx)(O.a,{size:"small",variant:"outlined",margin:"dense",required:!0,fullWidth:!0,id:"room-name",label:"Room Name",name:"roomName",autoComplete:"Room Name",error:he,autoFocus:!0,value:se,onChange:function(e){var t=e.target.value;""!==t&&""!==t.trim()?(pe(!1),le(t)):le("")},onKeyDown:Ve}),Object(M.jsx)(O.a,{size:"small",variant:"outlined",margin:"none",fullWidth:!0,id:"publisher-name",label:"Name",name:"name",error:ve,required:!0,autoComplete:"Name",value:be,onChange:function(e){var t=e.target.value;""!==t&&""!==t.trim()?(xe(!1),je(t)):je("")},onKeyDown:Ve})]}),Object(M.jsx)("div",{className:e.deviceContainer,children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(d.a,{margin:"dense",children:[Object(M.jsx)(b.a,{id:"demo-simple-select-label",children:"Select Audio Source"}),Object(M.jsx)(j.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:G,onChange:Re,autoWidth:!0,children:we.audioInputDevices.map((function(e){return Object(M.jsx)(f.a,{value:e.deviceId,children:e.label},e.deviceId)}))})]}),Object(M.jsxs)(d.a,{margin:"dense",children:[Object(M.jsx)(b.a,{id:"video",children:"Select Audio Output"}),we.audioOutputDevices&&Object(M.jsx)(j.a,{labelId:"video",id:"demo-simple-select",value:ee,onChange:Pe,autoWidth:!0,children:we.audioOutputDevices.map((function(e){return Object(M.jsx)(f.a,{value:e.deviceId,children:e.label},e.deviceId)}))})]}),Object(M.jsxs)(d.a,{margin:"dense",children:[Object(M.jsx)(b.a,{id:"video",children:"Select Video Source"}),we.videoInputDevices&&Object(M.jsx)(j.a,{labelId:"video",id:"demo-simple-select",value:Q,onChange:Ae,autoWidth:!0,children:we.videoInputDevices.map((function(e){return Object(M.jsx)(f.a,{value:e.deviceId,children:e.label},e.deviceId)}))})]})]})}),Object(M.jsxs)("div",{className:e.deviceContainer,children:[Object(M.jsx)(V,{className:e.deviceSettings,hasAudio:v,onAudioChange:Ne}),Object(M.jsx)(F,{className:e.deviceSettings,hasVideo:k,onVideoChange:Ee})]}),Object(M.jsx)("div",{id:"waiting-room-video-container",className:e.waitingRoomVideoContainer,ref:Ce})]})}),Object(M.jsx)("div",{className:e.containerCenter,children:Object(M.jsx)(h.a,{variant:"contained",color:"secondary",onClick:Me,children:"Join Call"})})]})}var G=n(20);n(257);function U(e){var t=e.container,n=Object(a.useState)(!1),r=Object(i.a)(n,2),o=r[0],s=r[1],u=Object(a.useState)([]),d=Object(i.a)(u,2),b=d[0],j=d[1],f=Object(a.useRef)(null),O=Object(a.useState)(null),h=Object(i.a)(O,2),p=h[0],g=h[1],m=function(){return"virtualviewer"===window.location.pathname.split("/")[2]},v=function(e){return"EC"!==e},x=c.a.useCallback((function(e){return!m()&&(window.location.pathname.split("/")[2],!0)}),[]),C=c.a.useCallback((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log(e),f.current&&t.current){var a=Object.assign({},n,{insertMode:"append",width:"100%",height:"100%",fitMode:"contain",style:{buttonDisplayMode:"on",nameDisplayMode:"on"},showControls:!0,subscribeToVideo:v(e.name),subscribeToAudio:x()});f.current.subscribe(e,v(e.name)?t.current.id:null,a)}}),[t,x]),y=Object(a.useCallback)((function(e){console.log("stream created event "+e.stream.name),console.log(" subscribe to video "+v(e.stream.name)),console.log("is experience composer "+m()),C(e.stream),function(e){var t=e.stream;j((function(e){return[].concat(Object(G.a)(e),[t])}))}({stream:e.stream})}),[C]),k=Object(a.useCallback)((function(e){!function(e){var t=e.stream;j((function(e){return e.filter((function(e){return e.id!==t.id}))}))}({stream:e.stream})}),[]),S=Object(a.useCallback)((function(e){g("disconnected")}),[]),I=Object(a.useCallback)((function(e){g("reconnecting")}),[]),w=Object(a.useCallback)((function(e){console.log(e)}),[]),D=Object(a.useCallback)((function(e){var t=e.apiKey,n=e.sessionId,a=e.token;if(!t)throw new Error("Missing apiKey");if(!n)throw new Error("Missing sessionId");if(!a)throw new Error("Missing token");f.current=l.a.initSession(t,n,{});var c={streamCreated:y,streamDestroyed:k,sessionReconnecting:I,sessionDisconnected:S,connectionDestoyed:w};return f.current.on(c),new Promise((function(e,t){f.current.connect(a,(function(n){f.current&&(n?t(n):n||(console.log("Session Connected!"),s(!0),e(f.current)))}))}))}),[w,S,I,y,k]),N=c.a.useCallback((function(){f.current&&(f.current.on("disconnected",(function(){f.current=null})),f.current.disconnect())}),[]);return{session:f,connected:o,createSession:D,destroySession:N,streams:b,status:p}}var H=n(161),q=n.n(H),Q=n(160),X=n.n(Q),Z=n(336),$=n(369),ee=Object(z.a)({selected:{color:"#b779ff"}});function te(e){e.toggleAudio;var t=e.hasAudio,n=e.classes,a=e.handleAudioChange,c=t?"Disable Microphone":"Enable Microphone";ee();return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)($.a,{title:c,"aria-label":"add",children:Object(M.jsx)(Z.a,{edge:"start",color:"inherit","aria-label":"mic",onClick:a,className:"".concat(n.toolbarButtons," ").concat(t?"":n.disabledButton,"\n          "),children:t?Object(M.jsx)(q.a,{fontSize:"large"}):Object(M.jsx)(X.a,{fontSize:"large"})})})})}var ne=n(163),ae=n.n(ne),ce=n(162),re=n.n(ce),oe=Object(z.a)({selected:{color:"#b779ff",backgroundColor:"black"}});function ie(e){var t=e.classes,n=e.hasVideo,a=e.handleVideoChange,r=n?"Disable Camera":"Enable Camera",o=c.a.useState(null),s=Object(i.a)(o,2),l=(s[0],s[1],c.a.useState([])),u=Object(i.a)(l,2),d=(u[0],u[1],c.a.useState(!1)),b=Object(i.a)(d,2),j=(b[0],b[1],c.a.useRef(null),c.a.useState(0)),f=Object(i.a)(j,2);f[0],f[1],oe();return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)($.a,{title:r,"aria-label":"add",children:Object(M.jsx)(Z.a,{onClick:a,edge:"start","aria-label":"videoCamera",size:"small",className:"".concat(t.arrowButton," ").concat(n?"":t.disabledButton),children:n?Object(M.jsx)(ae.a,{fontSize:"large"}):Object(M.jsx)(re.a,{fontSize:"large"})})})})}function se(e){var t=e.session,n=Object(a.useState)(null),c=Object(i.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(null),l=Object(i.a)(s,2),u=(l[0],l[1],Object(a.useState)(null)),d=Object(i.a)(u,2),b=d[0],j=d[1],f=Object(a.useState)(null),O=Object(i.a)(f,2),h=O[0],p=O[1],g=Object(a.useState)([]),m=Object(i.a)(g,2),v=m[0],x=m[1],C=Object(a.useState)([]),y=Object(i.a)(C,2),S=y[0],w=y[1],D=Object(a.useState)([]),N=Object(i.a)(D,2),E=N[0],A=N[1],R=Object(a.useState)([]),P=Object(i.a)(R,2),M=P[0],V=P[1],B=Object(a.useCallback)(function(){var e=Object(I.a)(Object(k.a)().mark((function e(n){var a,c;return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.type,c=n.data,e.abrupt("return",new Promise((function(e,n){var r=JSON.parse(JSON.stringify({type:a,data:c}));t&&t.signal(r,(function(t){t?n(t):e()}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),T=Object(a.useCallback)((function(e){var t=e.data;console.log(t);var n=t.split(":")[0],a=t.split(":")[1];j(n),p(a)}),[]),F=Object(a.useCallback)((function(e){return B({type:"message",data:e})}),[B]),z=Object(a.useCallback)((function(e){var t=e.data,n=(e.from,JSON.parse(t));n.length&&n.forEach((function(e){x((function(t){return[].concat(Object(G.a)(t),[{Text:"".concat(e.Text," | ").concat(e.Score),concepts:e.RxNormConcepts?e.RxNormConcepts:[]}])}))}))}),[]),L=Object(a.useCallback)((function(e){var t=e.data,n=(e.from,JSON.parse(t));n.length&&n.forEach((function(e){w((function(t){return[].concat(Object(G.a)(t),[{Text:"".concat(e.Text," | ").concat(e.Score),concepts:e.ICD10CMConcepts?e.ICD10CMConcepts:[]}])}))}))}),[]),W=Object(a.useCallback)((function(e){var t=e.data,n=(e.from,JSON.parse(t));n.length&&n.forEach((function(e){"ANATOMY"===(null===e||void 0===e?void 0:e.Category)&&A((function(t){return[].concat(Object(G.a)(t),[e])})),"PROTECTED_HEALTH_INFORMATION"===(null===e||void 0===e?void 0:e.Category)&&V((function(t){return[].concat(Object(G.a)(t),[e])}))}))}),[]),Y=Object(a.useCallback)((function(e){var t=e.data;e.from;console.log("received message"),console.log(t),o(t)}),[]);return Object(a.useEffect)((function(){return t&&(t.on("signal:captions",Y),t.on("signal:medicalEntities",W),t.on("signal:archiveStarted",T),t.on("signal:medication",z),t.on("signal:medCondition",L)),function(){t&&(t.off("signal:captions",Y),t.off("signal:archiveStarted",T),t.off("signal:medicalEntities",W),t.off("signal:medication",z),t.off("signal:medCondition",z))}}),[t,Y,T,W,z,L]),{sendMessage:F,messages:r,archiveId:b,renderedSesion:h,medicalConditions:S,medication:v,piiEntities:M,anatomyEntities:E}}var le=n(124),ue=n.n(le),de=Object(z.a)((function(e){return{activeRecordingIcon:{boxShadow:"0 0 0 0 rgba(213, 15, 45, 1)",animation:"pulse-red 2s infinite",borderRadius:"100%"}}})),be=n(355);function je(e){var t=e.classes,n=e.session,c=Object(a.useContext)(p),r=c.preferences,o=c.setPreferences,s=Object(u.h)().roomName,l=se({session:n}).archiveId,d=Object(a.useState)(!1),b=Object(i.a)(d,2),j=b[0],f=b[1],O=Object(a.useState)(null),h=Object(i.a)(O,2),g=h[0],m=h[1],v=de(),w=function(){var e=Object(I.a)(Object(k.a)().mark((function e(t){var n,a,c;return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,x(t);case 5:if(!((n=e.sent).status=n.data)){e.next=13;break}a=n.data,c=a.id,a.sessionId,r.renderId=c,m(c),f(!0),e.next=14;break;case 13:return e.abrupt("return");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log("run preferences hook"),g===r.renderId&&l===r.archiveId||g&&o(Object(S.a)(Object(S.a)({},r),{},{renderId:g,archiveId:l}))}),[g,o,l,r]),Object(a.useEffect)((function(){r.recording!==j&&o(Object(S.a)(Object(S.a)({},r),{},{recording:j}))}),[j,r,o]);var D=function(){var e=Object(I.a)(Object(k.a)().mark((function e(t){var n;return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=19;break}return e.prev=1,e.next=4,C(t);case 4:if(n=e.sent,console.log(n),!(n.status=200)){e.next=11;break}N(l),m(null),e.next=12;break;case 11:return e.abrupt("return");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:e.next=20;break;case 19:return e.abrupt("return");case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(I.a)(Object(k.a)().mark((function e(t){var n;return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!j){e.next=7;break}return e.next=4,y(t);case 4:n=e.sent,console.log(n),200===n.status&&n.data&&(n.data.status,f(!1));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),E=j?"Stop Recording":"Start Recording";return Object(M.jsx)(be.a,{title:E,"aria-label":"add",children:Object(M.jsx)(Z.a,{"aria-label":"record",onClick:function(){console.log("trying to start recording"),j?D(g):w(s)},className:t.toolbarButtons,children:j?Object(M.jsx)(ue.a,{fontSize:"large",className:v.activeRecordingIcon,style:{color:"#D50F2C"}}):Object(M.jsx)(ue.a,{fontSize:"large"})})})}var fe=n(167),Oe=n.n(fe);function he(e){var t=e.classes,n=e.handleEndCall;return Object(M.jsx)($.a,{title:"End call","aria-label":"add",children:Object(M.jsx)(Z.a,{edge:"start",color:"inherit","aria-label":"videoCamera",className:t.toolbarButtons,style:{backgroundColor:"#D50F2C"},onClick:n,children:Object(M.jsx)(Oe.a,{fontSize:"inherit"})})})}var pe=Object(z.a)((function(e){return{toolbarContainer:{backgroundColor:e.palette.toolbarBackground.main,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:0,left:0,right:0,height:"90px",borderRadius:"18px"},paper:{position:"absolute",display:"flex",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},toolbarMobileContainer:{backgroundColor:e.palette.toolbarBackground.main,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:0,left:0,right:0,height:"60px",margin:e.spacing(2),borderRadius:"25px"},toolbarButtons:{margin:e.spacing(1),borderRadius:"5em",backgroundColor:"#32353A",color:"#fff"},arrowButton:{borderRadius:"5em",height:"50px",width:"50px",backgroundColor:"#32353A",color:"#fff"},infoButton:{position:"absolute",left:"0",margin:e.spacing(1),borderRadius:"5em",height:"50px",width:"50px",backgroundColor:"#32353A",color:"#fff"},groupButton:{margin:"8px"},disabledButton:{backgroundColor:e.palette.activeButtons.red,"&:hover":{backgroundColor:e.palette.activeButtons.red}},activeButton:{backgroundColor:e.palette.activeButtons.green,"&:hover":{backgroundColor:e.palette.activeButtons.green}},activeButtonIcon:{color:e.palette.activeButtons.green}}}));var ge=function(e){var t=e.session,n=e.handleVideoChange,a=e.handleAudioChange,c=e.hasVideo,r=e.hasAudio,o=pe(),i=Object(u.g)().push,s=Object(u.h)().roomName,l=se({session:t}).renderedSesion;return E().destroyPublisher,Object(M.jsxs)("div",{className:"toolbar",children:[Object(M.jsx)(te,{classes:o,handleAudioChange:a,hasAudio:r}),Object(M.jsx)(ie,{classes:o,handleVideoChange:n,hasVideo:c}),Object(M.jsx)(je,{classes:o,session:t}),Object(M.jsx)(he,{classes:o,handleEndCall:function(){t&&i("/videorti/".concat(s,"/").concat(l,"/end"))}})]})};Object(z.a)({root:{top:"0",background:function(e){var t=e.wsStatus;return"disconnected"===t||"reconnecting"===t?"#f19c38":"reconnected"===t?"#4caf50":void 0},justifyContent:"center"},info:{top:"0",background:"#418be9",justifyContent:"center"},action:{position:"absolute",right:"0",paddingRight:"10px"},networkStatusIcons:{paddingRight:"10px"},snackBarContent:{display:"flex",alignItems:"flex-end",fontSize:"14px"}}),n(168),n(361);var me=n(370),ve=n(359),xe=n(348),Ce=n(349),ye=n(371),ke=n(356),Se=n(362),Ie=n(169),we=n.n(Ie),De=n(172),Ne=n.n(De),Ee=n(170),Ae=n.n(Ee),Re=n(171),Pe=n.n(Re),Me=n(112),Ve=n(173),Be=n.n(Ve);var Te=function(e){var t=e.listOfEntities,n=e.entity;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(me.a,{children:Object(M.jsxs)(ve.a,{disablePadding:!0,children:[Object(M.jsx)(xe.a,{children:function(e){switch(e){case"Medical Condition":return Object(M.jsx)(we.a,{});case"Medication":return Object(M.jsx)(Ae.a,{});case"Anatomy":return Object(M.jsx)(Pe.a,{});case"Treatments":return Object(M.jsx)(Ne.a,{});case"PII":return Object(M.jsx)(Be.a,{});default:return}}(n)}),Object(M.jsx)(Me.a,{style:{background:function(e){switch(e){case"Medical Condition":return"#5cceff";case"Medication":return"#f0e442";case"Anatomy":return"#d185af";case"Treatments":return"#4a9";case"PII":return"#999";default:return}}(n),padding:"0px"},variant:"div",component:"div",gutterBottom:!0,children:n})]},n)}),Object(M.jsx)(me.a,{sx:{pl:2,display:"flex",flexDirection:"column",maxHeight:120,overflow:"hidden",overflowY:"scroll",bgcolor:"background.paper"},children:t?t.map((function(e,t){return Object(M.jsxs)("div",{children:[Object(M.jsx)(ve.a,{disablePadding:!0,children:Object(M.jsx)(Ce.a,{primary:e.Text})}),Object(M.jsx)(ye.a,{in:!0,timeout:"auto",unmountOnExit:!0,sx:{pl:2},children:Object(M.jsx)(me.a,{component:"div",disablePadding:!0,children:e.concepts&&e.concepts.length>0?Object(M.jsx)(ke.a,{value:"0",size:"small",children:e.concepts.map((function(e,n){return Object(M.jsx)(Se.a,{value:n,children:"".concat(e.Code," | ").concat(e.Description," | ").concat(e.Score)},"item-".concat(t,"-").concat(n))}))}):""})})]},"".concat(e.Text,"-").concat(t))})):""})]})};var Fe=function(){Object(a.useRef)(!1),Object(a.useRef)(0);var e=Object(a.useRef)(),t=Object(u.h)().roomName,n=(Object(a.useContext)(p).preferences,Object(a.useState)("Say something...")),c=Object(i.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(null),l=Object(i.a)(s,2),d=l[0],b=l[1],j=Object(a.useState)(null),f=Object(i.a)(j,2),O=(f[0],f[1]),h=Object(a.useState)(!0),g=Object(i.a)(h,2),m=g[0],v=g[1],x=Object(a.useState)(!0),C=Object(i.a)(x,2),y=C[0],k=C[1],S=Object(a.useState)(null),I=Object(i.a)(S,2),w=(I[0],I[1]),N=U({container:e}),A=N.session,R=N.createSession,P=N.connected,V=(N.status,se({session:A.current})),B=V.messages,T=(V.sendMessage,V.medication),F=V.medicalConditions,z=V.piiEntities,L=V.anatomyEntities,W=E(),Y=W.publisher,J=W.publish,K=W.pubInitialised;W.isPublishing,W.publisherError,W.destroyPublisher,Object(a.useEffect)((function(){o(B)}),[B]),Object(a.useEffect)((function(){D(t).then((function(e){var t=e.data;console.log("Credential data: ",t),b({apiKey:t.apiKey,sessionId:t.sessionId,token:t.token}),w(t.userId)})).catch((function(e){O(e),console.log(e)}))}),[t]),Object(a.useEffect)((function(){if(d){var e=d.apiKey,t=d.sessionId,n=d.token;console.log(e),R({apiKey:e,sessionId:t,token:n})}}),[R,d]);var _=Object(a.useCallback)((function(){m?(Y.publishAudio(!1),v(!1)):(Y.publishAudio(!0),v(!0))}),[m,Y]),G=Object(a.useCallback)((function(){y?(Y.publishVideo(!1),k(!1)):(Y.publishVideo(!0),k(!0))}),[y,Y]);return Object(a.useEffect)((function(){A.current&&P&&!K&&e.current&&J({session:A.current,containerId:e.current.id})}),[J,A,P,K]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{className:"videoContainer",children:[Object(M.jsx)("div",{className:"video",ref:e,id:"video-container"}),Object(M.jsxs)("div",{className:"medicalAnalysis",children:[Object(M.jsx)("div",{className:"entityType",children:Object(M.jsx)(Te,{listOfEntities:F,entity:"Medical Condition"})}),Object(M.jsx)("div",{className:"entityType",children:T?Object(M.jsx)(Te,{listOfEntities:T,entity:"Medication"}):null}),Object(M.jsx)("div",{className:"entityType",children:Object(M.jsx)(Te,{listOfEntities:L,entity:"Anatomy"})}),Object(M.jsx)("div",{className:"entityType",children:Object(M.jsx)(Te,{listOfEntities:z,entity:"PII"})})]})]}),Object(M.jsxs)("div",{className:"original",children:[" ",r]}),Object(M.jsx)(ge,{handleAudioChange:_,handleVideoChange:G,session:A.current,hasAudio:m,hasVideo:y})]})},ze=Object(z.a)({flex:{height:"100vh",display:"flex",flexDirection:"column",flexWrap:"nowrap",justifyContent:"flex-start",alignContent:"stretch",alignItems:"flex-start"}});var Le=function(){var e=ze();return Object(M.jsx)("div",{className:e.flex,children:Object(M.jsx)(Fe,{})})},We=n(175),Ye=n.n(We),Je=n(351),Ke=n(353),_e=n(352),Ge=n(4),Ue=Object(z.a)((function(e){var t;return{banner:{zIndex:1,margin:"200px",height:"100px",width:"50%",alignItems:"center",borderRadius:"30px",backgroundColor:"black"},container:(t={},Object(Ge.a)(t,"@media (min-width:768px)",{marginTop:10,display:"flex",flexDirection:"row"}),Object(Ge.a)(t,"display","flex"),Object(Ge.a)(t,"flexDirection","column"),Object(Ge.a)(t,"alignItems","center"),Object(Ge.a)(t,"alignContent","center"),t),new__meeting:{color:"rgb(43,158,250)"},meetingInfo:{margin:"100px",width:"50%",height:"100px",color:"white"},recording:{display:"flex",flexDirection:"row",margin:"5px",padding:"5px"},root:{minWidth:275,margin:"auto"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},centeredFlex:{justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"black",color:"white",borderRadius:"30px"}}}));function He(){var e=Object(u.g)().push,t=Object(a.useState)(null),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Ue(),s=Object(u.h)().sessionId;return Object(a.useEffect)((function(){(function(e){return m.a.get("".concat(v,"/archive/").concat(e))})(s).then((function(e){e.data&&r(e.data)})).catch((function(e){console.log(e)}))}),[s]),Object(M.jsxs)("div",{className:o.container,children:[Object(M.jsxs)("div",{className:o.meetingInfo,children:[Object(M.jsx)("h2",{style:{color:"white"},children:"We hope you enjoyed your meeting"}),Object(M.jsx)("h2",{style:{color:"white"},children:"This was powered by Vonage"}),Object(M.jsx)(Z.a,{onClick:function(){e("/")},className:o.new__meeting,children:"Start new meeting"})]}),Object(M.jsx)("div",{className:o.banner,children:Object(M.jsxs)(Je.a,{className:o.centeredFlex,variant:"outlined",children:[Object(M.jsx)(_e.a,{children:c&&c.length?Object(M.jsx)("h3",{style:{color:"white"},children:"Recordings"}):Object(M.jsx)("h3",{children:"There are no recordings"})}),Object(M.jsx)(Ke.a,{children:Object(M.jsx)("div",{className:o.root,children:c?Object(M.jsx)("div",{className:o.recording,children:Object(M.jsx)("ul",{children:c.map((function(e){return Object(M.jsxs)("li",{children:["Started at: ",Date(e.createdAt),"available"===e.status?Object(M.jsx)(h.a,{color:"inherit",edge:"start",target:"_blank",href:e.url,children:Object(M.jsx)(Ye.a,{})}):null]},e.id)}))})}):null})})]})})]})}var qe=n(176),Qe=n(354),Xe=n(7),Ze=["component"],$e=function(e){var t,n,c=e.component,r=Object(Xe.a)(e,Ze),o=(Object(a.useContext)(p).preferences,null===r||void 0===r||null===(t=r.computedMatch)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.roomName);return Object(M.jsx)(u.b,Object(S.a)(Object(S.a)({},r),{},{render:function(e){return o?Object(M.jsx)(c,Object(S.a)({},e)):Object(M.jsx)(u.a,{to:{pathname:"/"}})}}))};Object(z.a)((function(e){return{header:{flex:"0.5 1 auto",alignSelf:"stretch",margin:"auto",padding:"15px 30px",display:"flex",background:"linear-gradient(to right, #8728fb, #fea18c) !important",color:"#fff",width:"100%",alignItems:"center"}}}));Object(z.a)({flex:{height:"100vh",display:"flex",flexDirection:"column",flexWrap:"nowrap",justifyContent:"flex-start",alignContent:"stretch",alignItems:"flex-start"}});var et=n(70);var tt=function(){var e=Object(a.useState)({name:null,defaultSettings:{}}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useMemo)((function(){return{preferences:n,setPreferences:c}}),[n,c]);return Object(M.jsx)(Qe.a,{theme:Object(qe.a)({palette:{type:"light",primary:{main:"#b779ff"},secondary:{main:"#d6219c"},bodyBackground:{black:"#131415"},callBackground:{main:"#20262D"},toolbarBackground:{main:"#41464D"},activeButtons:{green:"#1C8731",red:"#D50F2C"}}}),children:Object(M.jsx)(et.a,{children:Object(M.jsx)(p.Provider,{value:r,children:Object(M.jsxs)(u.d,{children:[Object(M.jsx)($e,{exact:!0,path:"/room/:roomName",component:Le}),Object(M.jsx)(u.b,{exact:!0,path:"/room/:roomName/:sessionId/end",children:Object(M.jsx)(He,{})}),Object(M.jsx)(u.b,{path:"/",children:Object(M.jsx)(_,{})}),Object(M.jsx)(u.b,{path:"*",children:Object(M.jsx)(u.a,{to:{pathname:"/"}})})]})})})})},nt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,373)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(tt,{})}),document.getElementById("root")),nt()}},[[260,1,2]]]);
//# sourceMappingURL=main.bae5a9d1.chunk.js.map